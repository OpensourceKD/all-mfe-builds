(self.webpackChunkmfe_USERS_CRUD=self.webpackChunkmfe_USERS_CRUD||[]).push([[923,304],{3304:(I,m,t)=>{t.r(m),t.d(m,{AuthService:()=>p,CoreServicesComponent:()=>E,CoreServicesService:()=>a,OrganizationService:()=>K,ProductCategory:()=>O,RoleManagementService:()=>v,RoleService:()=>d,SalesDataService:()=>L,SalesStatus:()=>T,SystemRole:()=>R,TeamService:()=>$,UserRole:()=>u,UserService:()=>U,ZitadelApiService:()=>W});var s=t(4332);let a=(()=>{class c{constructor(){}static{this.\u0275fac=function(r){return new(r||c)}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var _=t(467),n=t(3425),f=t(4230);let p=(()=>{class c{constructor(e){this.http=e,this.id="auth of pokemon",this.ISSUER_BASE_URL="https://topfix-wrczmn.us1.zitadel.cloud",this.CLIENT_ID="336777344075263315",this.REDIRECT_URI="https://opensourcekd.github.io/pokemon/#/auth-callback",this.SCOPE="openid profile email",this.TOKEN_KEY="zitadel_token",this.USER_INFO_KEY="zitadel_user_info",this.userSubject=new n.BehaviorSubject(this.getUserInfoFromStorage()),this.user$=this.userSubject.asObservable(),console.log("In constructor of auth service in pokemon")}login(e){e&&console.log(`[AuthService] Logged in: ${e}`),this.redirectToZitadelLogin()}redirectToZitadelLogin(){const e=new URL(`${this.ISSUER_BASE_URL}/oauth/v2/authorize`),r=this.generateRandomState(),y=this.generateCodeVerifier();sessionStorage.setItem("oauth_state",r),sessionStorage.setItem("code_verifier",y),e.searchParams.append("client_id",this.CLIENT_ID),e.searchParams.append("redirect_uri",this.REDIRECT_URI),e.searchParams.append("response_type","code"),e.searchParams.append("scope",this.SCOPE),e.searchParams.append("state",r),window.location.href=e.toString()}handleCallback(e,r){var y=this;return(0,_.A)(function*(){const S=sessionStorage.getItem("oauth_state");if(r!==S)return console.error("State mismatch - possible CSRF attack"),!1;try{const j=yield y.exchangeCodeForToken(e);y.setToken(j.access_token);const V=y.decodeIdToken(j.id_token);return y.setUserInfo(V),sessionStorage.removeItem("oauth_state"),sessionStorage.removeItem("code_verifier"),!0}catch(j){return console.error("Error exchanging code for token:",j),!1}})()}exchangeCodeForToken(e){var r=this;return(0,_.A)(function*(){const y=`${r.ISSUER_BASE_URL}/oauth/v2/token`,S=new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:r.REDIRECT_URI,client_id:r.CLIENT_ID}),j=yield fetch(y,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:S.toString()});if(!j.ok)throw new Error(`Token exchange failed: ${j.statusText}`);return j.json()})()}decodeIdToken(e){try{const r=e.split(".")[1],y=JSON.parse(atob(r));return{sub:y.sub,name:y.name,email:y.email}}catch(r){return console.error("Error decoding ID token:",r),{sub:""}}}logout(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.USER_INFO_KEY),this.userSubject.next(null)}getToken(){return localStorage.getItem(this.TOKEN_KEY)}setToken(e){localStorage.setItem(this.TOKEN_KEY,e)}isAuthenticated(){return!!this.getToken()}getUser(){return this.userSubject.value}getUserInfoFromStorage(){const e=localStorage.getItem(this.USER_INFO_KEY);return e?JSON.parse(e):null}setUserInfo(e){localStorage.setItem(this.USER_INFO_KEY,JSON.stringify(e)),this.userSubject.next(e)}generateRandomState(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}generateCodeVerifier(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}static{this.\u0275fac=function(r){return new(r||c)(s.\u0275\u0275inject(f.HttpClient))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),E=(()=>{class c{static{this.\u0275fac=function(r){return new(r||c)}}static{this.\u0275cmp=s.\u0275\u0275defineComponent({type:c,selectors:[["org-core-services"]],standalone:!0,features:[s.\u0275\u0275StandaloneFeature],decls:2,vars:0,template:function(r,y){1&r&&(s.\u0275\u0275elementStart(0,"p"),s.\u0275\u0275text(1," core-services works! "),s.\u0275\u0275elementEnd())}})}}return c})();var u=function(c){return c.SUPER_ADMIN="super-admin",c.ORG_ADMIN="org-admin",c.TEAM_LEAD="team-lead",c.SALES_EXECUTIVE="sales-executive",c}(u||{});let d=(()=>{class c{constructor(e){this.currentUserSubject=new n.BehaviorSubject(this.getDummyUser()),this.currentUser$=this.currentUserSubject.asObservable(),this.dataService=e}getCurrentUser(){return this.currentUserSubject.value}setCurrentUser(e){this.currentUserSubject.next(e)}hasRole(e){return this.getCurrentUser()?.role===e}hasAnyRole(e){const r=this.getCurrentUser();return!!r&&e.includes(r.role)}isAdmin(){return this.hasAnyRole([u.SUPER_ADMIN,u.ORG_ADMIN])}isTeamLeadOrHigher(){return this.hasAnyRole([u.SUPER_ADMIN,u.ORG_ADMIN,u.TEAM_LEAD])}getAllUsers(){return[{id:"user-1",name:"John Admin",email:"john.admin@company.com",role:u.SUPER_ADMIN},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",role:u.ORG_ADMIN},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",role:u.TEAM_LEAD,teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",role:u.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",role:u.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",role:u.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"}]}getViewableUsers(){const e=this.getCurrentUser();if(!e)return[];const r=this.getAllUsers();return this.isTeamLeadOrHigher()?r.filter(y=>y.role===u.SALES_EXECUTIVE||y.id===e.id):r.filter(y=>y.id===e.id)}getDummyUser(){return{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",role:u.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"}}static{this.\u0275fac=function(r){return new(r||c)(s.\u0275\u0275inject("DataService",8))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var P=t(3103),T=function(c){return c.COMPLETED="completed",c.PENDING="pending",c.CANCELLED="cancelled",c}(T||{}),O=function(c){return c.ELECTRONICS="Electronics",c.SOFTWARE="Software",c.SERVICES="Services",c.HARDWARE="Hardware",c}(O||{});let L=(()=>{class c{constructor(e){this.dummySalesData=this.generateDummyData(),this.dataService=e}getSalesHistory(e,r,y){if(this.dataService)return this.dataService.getSalesHistory(e,r,y);let S=this.dummySalesData.filter(j=>j.salesExecutiveId===e);return r&&(S=S.filter(j=>j.date>=r)),y&&(S=S.filter(j=>j.date<=y)),(0,n.of)(S).pipe((0,P.c)(300))}getSalesSummary(e){if(this.dataService)return this.dataService.getSalesSummary(e);const r=this.dummySalesData.filter(S=>S.salesExecutiveId===e),y={totalSales:r.filter(S=>S.status===T.COMPLETED).reduce((S,j)=>S+j.amount,0),totalCommission:r.filter(S=>S.status===T.COMPLETED).reduce((S,j)=>S+j.commission,0),completedCount:r.filter(S=>S.status===T.COMPLETED).length,pendingCount:r.filter(S=>S.status===T.PENDING).length,cancelledCount:r.filter(S=>S.status===T.CANCELLED).length};return(0,n.of)(y).pipe((0,P.c)(300))}getAllSales(){return this.dataService?this.dataService.getAllSales():(0,n.of)(this.dummySalesData).pipe((0,P.c)(300))}generateDummyData(){const e=[{name:"Enterprise Software License",category:O.SOFTWARE,basePrice:5e4},{name:"Cloud Storage Solution",category:O.SERVICES,basePrice:25e3},{name:"Server Hardware",category:O.HARDWARE,basePrice:35e3},{name:"IoT Device Package",category:O.ELECTRONICS,basePrice:15e3},{name:"Consulting Services",category:O.SERVICES,basePrice:2e4},{name:"Mobile App Development",category:O.SOFTWARE,basePrice:45e3},{name:"Security Suite",category:O.SOFTWARE,basePrice:3e4},{name:"Network Infrastructure",category:O.HARDWARE,basePrice:6e4}],r=["Acme Corporation","Tech Innovations Inc","Global Solutions Ltd","Digital Dynamics","Future Systems","Smart Technologies","Enterprise Solutions","Cloud Masters"],y=["North","South","East","West","Central"],S=[{id:"user-4",name:"Alice Sales"},{id:"user-5",name:"Bob Sales"},{id:"user-6",name:"Carol Sales"}],j=[T.COMPLETED,T.COMPLETED,T.COMPLETED,T.PENDING,T.CANCELLED],V=[];let ee=1;for(let X=0;X<50;X++){const Q=S[X%S.length],k=e[Math.floor(Math.random()*e.length)],te=r[Math.floor(Math.random()*r.length)],re=y[Math.floor(Math.random()*y.length)],ne=j[Math.floor(Math.random()*j.length)],i=k.basePrice+(1e4*Math.random()-5e3),o=.05*i,l=new Date;l.setDate(l.getDate()-Math.floor(180*Math.random())),V.push({id:"sale-"+ee++,salesExecutiveId:Q.id,salesExecutiveName:Q.name,productName:k.name,productCategory:k.category,amount:Math.round(i),commission:Math.round(o),status:ne,date:l,clientName:te,region:re})}return V.sort((X,Q)=>Q.date.getTime()-X.date.getTime())}static{this.\u0275fac=function(r){return new(r||c)(s.\u0275\u0275inject("DataService",8))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var R=function(c){return c.SUPER_ADMIN="super-admin",c.ORG_ADMIN="org-admin",c.TEAM_LEAD="team-lead",c.MEMBER="member",c}(R||{}),C=t(6354),b=t(9437);let W=(()=>{class c{constructor(e,r){this.http=e,this.authService=r,this.API_BASE_URL="https://topfix-wrczmn.us1.zitadel.cloud",this.MANAGEMENT_API=`${this.API_BASE_URL}/management/v1`,this.AUTH_API=`${this.API_BASE_URL}/auth/v1`}getHeaders(){const e=this.authService.getToken();return new f.HttpHeaders({"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""})}getCurrentUser(){return this.http.get(`${this.AUTH_API}/users/me`,{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}listUsers(e){return this.http.post(`${this.MANAGEMENT_API}/users/_search`,e||{},{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}getUserById(e){return this.http.get(`${this.MANAGEMENT_API}/users/${e}`,{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}createUser(e){return this.http.post(`${this.MANAGEMENT_API}/users/human/_import`,e,{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}updateUser(e,r){return this.http.put(`${this.MANAGEMENT_API}/users/${e}`,r,{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}deactivateUser(e){return this.http.post(`${this.MANAGEMENT_API}/users/${e}/_deactivate`,{},{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}listOrganizations(e){return this.http.post(`${this.API_BASE_URL}/admin/v1/orgs/_search`,e||{},{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}getMyOrganization(){return this.http.get(`${this.MANAGEMENT_API}/orgs/me`,{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}listProjects(e){return this.http.post(`${this.MANAGEMENT_API}/projects/_search`,e||{},{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}getProjectById(e){return this.http.get(`${this.MANAGEMENT_API}/projects/${e}`,{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}createProject(e){return this.http.post(`${this.MANAGEMENT_API}/projects`,e,{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}updateProject(e,r){return this.http.put(`${this.MANAGEMENT_API}/projects/${e}`,r,{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}listProjectRoles(e,r){return this.http.post(`${this.MANAGEMENT_API}/projects/${e}/roles/_search`,r||{},{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}listUserGrants(e,r){return this.http.post(`${this.MANAGEMENT_API}/users/${e}/grants/_search`,r||{},{headers:this.getHeaders()}).pipe((0,b.W)(this.handleError))}handleError(e){return console.error("Zitadel API Error:",e),(0,n.throwError)(()=>e)}static{this.\u0275fac=function(r){return new(r||c)(s.\u0275\u0275inject(f.HttpClient),s.\u0275\u0275inject(p))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),K=(()=>{class c{constructor(e){this.zitadelApi=e,this.organizationsCache=[],this.organizationsSubject=new n.BehaviorSubject([]),this.organizations$=this.organizationsSubject.asObservable(),this.loadOrganization()}loadOrganization(){this.zitadelApi.getMyOrganization().pipe((0,C.T)(e=>this.mapZitadelOrgToOrganization(e)),(0,b.W)(e=>(console.error("Error loading organization from Zitadel:",e),(0,n.of)(null)))).subscribe(e=>{e&&(this.organizationsCache=[e],this.organizationsSubject.next(this.organizationsCache))})}mapZitadelOrgToOrganization(e){return e&&e.org?{id:e.org.id,name:e.org.name,description:e.org.name,createdAt:e.org.details?.creationDate?new Date(e.org.details.creationDate):new Date,updatedAt:e.org.details?.changeDate?new Date(e.org.details.changeDate):new Date,isActive:"ORG_STATE_ACTIVE"===e.org.state,settings:{timezone:"UTC",currency:"USD",locale:"en-US"}}:null}getAll(){return this.zitadelApi.getMyOrganization().pipe((0,C.T)(e=>{const r=this.mapZitadelOrgToOrganization(e);return r?[r]:[]}),(0,b.W)(e=>(console.error("Error getting organizations:",e),(0,n.of)(this.organizationsCache))))}getById(e){return this.getAll().pipe((0,C.T)(r=>r.find(y=>y.id===e)))}create(e){console.warn("Creating organizations in Zitadel requires admin privileges");const r={...e,id:`org-${Date.now()}`,createdAt:new Date,updatedAt:new Date};return(0,n.of)(r)}update(e,r){console.warn("Updating organizations in Zitadel requires specific permissions");const y=this.organizationsCache.findIndex(S=>S.id===e);return-1!==y?(this.organizationsCache[y]={...this.organizationsCache[y],...r,updatedAt:new Date},this.organizationsSubject.next(this.organizationsCache),(0,n.of)(this.organizationsCache[y])):(0,n.of)(null)}delete(e){return console.warn("Deleting organizations is not supported via Zitadel API"),(0,n.of)(!1)}static{this.\u0275fac=function(r){return new(r||c)(s.\u0275\u0275inject(W))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),$=(()=>{class c{constructor(e){this.zitadelApi=e,this.teamsCache=[],this.teamsSubject=new n.BehaviorSubject([]),this.teams$=this.teamsSubject.asObservable(),this.loadTeams()}loadTeams(){this.zitadelApi.listProjects().pipe((0,C.T)(e=>this.mapZitadelProjectsToTeams(e)),(0,b.W)(e=>(console.error("Error loading teams from Zitadel:",e),(0,n.of)([])))).subscribe(e=>{this.teamsCache=e,this.teamsSubject.next(e)})}mapZitadelProjectsToTeams(e){return e&&e.result?e.result.map(r=>({id:r.id,name:r.name,description:`Team for ${r.name} project`,organizationId:r.details?.resourceOwner||"default-org",leadId:void 0,createdAt:r.details?.creationDate?new Date(r.details.creationDate):new Date,updatedAt:r.details?.changeDate?new Date(r.details.changeDate):new Date,isActive:"PROJECT_STATE_ACTIVE"===r.state})):[]}mapTeamToZitadelFormat(e){return{name:e.name,projectRoleAssertion:!0,projectRoleCheck:!0}}getAll(){return this.zitadelApi.listProjects().pipe((0,C.T)(e=>this.mapZitadelProjectsToTeams(e)),(0,b.W)(e=>(console.error("Error getting teams:",e),(0,n.of)(this.teamsCache))))}getByOrganization(e){return this.getAll().pipe((0,C.T)(r=>r.filter(y=>y.organizationId===e)))}getById(e){return this.zitadelApi.getProjectById(e).pipe((0,C.T)(r=>{const y=this.mapZitadelProjectsToTeams({result:[r]});return y.length>0?y[0]:void 0}),(0,b.W)(r=>{console.error("Error getting team by ID:",r);const y=this.teamsCache.find(S=>S.id===e);return(0,n.of)(y)}))}create(e){const r=this.mapTeamToZitadelFormat(e);return this.zitadelApi.createProject(r).pipe((0,C.T)(y=>{const S={id:y.id||`team-${Date.now()}`,name:e.name,description:e.description,organizationId:e.organizationId,leadId:e.leadId,createdAt:new Date,updatedAt:new Date,isActive:!0};return this.teamsCache.push(S),this.teamsSubject.next(this.teamsCache),S}),(0,b.W)(y=>{throw console.error("Error creating team:",y),y}))}update(e,r){const y=this.mapTeamToZitadelFormat(r);return this.zitadelApi.updateProject(e,y).pipe((0,C.T)(S=>{const j=this.teamsCache.findIndex(V=>V.id===e);return-1!==j?(this.teamsCache[j]={...this.teamsCache[j],...r,updatedAt:new Date},this.teamsSubject.next(this.teamsCache),this.teamsCache[j]):null}),(0,b.W)(S=>{throw console.error("Error updating team:",S),S}))}delete(e){console.warn("Deleting projects (teams) in Zitadel should be done with caution"),console.warn("This operation only marks the team as inactive locally. Use Zitadel Console for actual deletion.");const r=this.teamsCache.findIndex(y=>y.id===e);return-1!==r?(this.teamsCache[r].isActive=!1,this.teamsCache[r].updatedAt=new Date,this.teamsSubject.next(this.teamsCache),(0,n.of)(!0)):(0,n.of)(!1)}static{this.\u0275fac=function(r){return new(r||c)(s.\u0275\u0275inject(W))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})(),U=(()=>{class c{constructor(e){this.zitadelApi=e,this.usersCache=[],this.usersSubject=new n.BehaviorSubject([]),this.users$=this.usersSubject.asObservable(),this.loadUsers()}loadUsers(){this.zitadelApi.listUsers().pipe((0,C.T)(e=>this.mapZitadelUsersToUsers(e)),(0,b.W)(e=>(console.error("Error loading users from Zitadel:",e),(0,n.of)([])))).subscribe(e=>{this.usersCache=e,this.usersSubject.next(e)})}extractUserName(e){return e.userName?e.userName:`${e.human?.profile?.firstName||""} ${e.human?.profile?.lastName||""}`.trim()||(e.human?.profile?.displayName?e.human.profile.displayName:e.human?.email?.email?e.human.email.email.split("@")[0]:`User ${e.id}`)}mapZitadelUsersToUsers(e){return e&&e.result?e.result.map(r=>({id:r.id,name:this.extractUserName(r),email:r.human?.email?.email||r.preferredLoginName||"",organizationId:r.details?.resourceOwner||"default-org",teamId:"default-team",roleId:"default-role",isActive:"USER_STATE_ACTIVE"===r.state,createdAt:r.details?.creationDate?new Date(r.details.creationDate):new Date,updatedAt:r.details?.changeDate?new Date(r.details.changeDate):new Date,zitadelUserId:r.id})):[]}mapUserToZitadelFormat(e){return{userName:e.name,profile:{firstName:e.name?.split(" ")[0]||"",lastName:e.name?.split(" ").slice(1).join(" ")||"",displayName:e.name},email:{email:e.email,isEmailVerified:!1}}}getAll(){return this.zitadelApi.listUsers().pipe((0,C.T)(e=>this.mapZitadelUsersToUsers(e)),(0,b.W)(e=>(console.error("Error getting users:",e),(0,n.of)(this.usersCache))))}getByOrganization(e){return this.getAll().pipe((0,C.T)(r=>r.filter(y=>y.organizationId===e)))}getByTeam(e){return this.getAll().pipe((0,C.T)(r=>r.filter(y=>y.teamId===e)))}getById(e){return this.zitadelApi.getUserById(e).pipe((0,C.T)(r=>{const y=this.mapZitadelUsersToUsers({result:[r]});return y.length>0?y[0]:void 0}),(0,b.W)(r=>{console.error("Error getting user by ID:",r);const y=this.usersCache.find(S=>S.id===e);return(0,n.of)(y)}))}create(e){const r=this.mapUserToZitadelFormat(e);return this.zitadelApi.createUser(r).pipe((0,C.T)(y=>{const S={id:y.userId||`user-${Date.now()}`,name:e.name,email:e.email,organizationId:e.organizationId,teamId:e.teamId,roleId:e.roleId,isActive:e.isActive,createdAt:new Date,updatedAt:new Date,zitadelUserId:y.userId};return this.usersCache.push(S),this.usersSubject.next(this.usersCache),S}),(0,b.W)(y=>{throw console.error("Error creating user:",y),y}))}update(e,r){const y=this.mapUserToZitadelFormat(r);return this.zitadelApi.updateUser(e,y).pipe((0,C.T)(S=>{const j=this.usersCache.findIndex(V=>V.id===e);return-1!==j?(this.usersCache[j]={...this.usersCache[j],...r,updatedAt:new Date},this.usersSubject.next(this.usersCache),this.usersCache[j]):null}),(0,b.W)(S=>{throw console.error("Error updating user:",S),S}))}delete(e){return this.zitadelApi.deactivateUser(e).pipe((0,C.T)(()=>{const r=this.usersCache.findIndex(y=>y.id===e);return-1!==r&&(this.usersCache[r].isActive=!1,this.usersCache[r].updatedAt=new Date,this.usersSubject.next(this.usersCache),!0)}),(0,b.W)(r=>(console.error("Error deleting user:",r),(0,n.of)(!1))))}static{this.\u0275fac=function(r){return new(r||c)(s.\u0275\u0275inject(W))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var D=t(5558);let v=(()=>{class c{constructor(e){this.zitadelApi=e,this.systemRoles=[{id:"role-1",name:"Super Admin",description:"Full system access",permissions:["*"],isSystemRole:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"role-2",name:"Organization Admin",description:"Full access within organization",permissions:["org:*","team:*","user:*"],isSystemRole:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"role-3",name:"Team Lead",description:"Manage team and team members",permissions:["team:read","team:update","user:read","user:update"],isSystemRole:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"role-4",name:"Member",description:"Basic member access",permissions:["user:read"],isSystemRole:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}],this.rolesCache=[...this.systemRoles],this.rolesSubject=new n.BehaviorSubject(this.rolesCache),this.roles$=this.rolesSubject.asObservable(),this.loadCustomRoles()}loadCustomRoles(){this.zitadelApi.listProjects().pipe((0,D.n)(e=>e&&e.result&&0!==e.result.length?this.zitadelApi.listProjectRoles(e.result[0].id):(0,n.of)([])),(0,C.T)(e=>this.mapZitadelRolesToRoles(e)),(0,b.W)(e=>(console.error("Error loading custom roles from Zitadel:",e),(0,n.of)([])))).subscribe(e=>{this.rolesCache=[...this.systemRoles,...e],this.rolesSubject.next(this.rolesCache)})}mapZitadelRolesToRoles(e){return e&&e.result?e.result.map(r=>({id:r.key,name:r.displayName||r.key,description:r.displayName||"",permissions:[],isSystemRole:!1,createdAt:r.details?.creationDate?new Date(r.details.creationDate):new Date,updatedAt:r.details?.changeDate?new Date(r.details.changeDate):new Date})):[]}getAll(){return(0,n.of)(this.rolesCache)}getById(e){const r=this.rolesCache.find(y=>y.id===e);return(0,n.of)(r)}getSystemRoles(){const e=this.rolesCache.filter(r=>r.isSystemRole);return(0,n.of)(e)}getCustomRoles(){const e=this.rolesCache.filter(r=>!r.isSystemRole);return(0,n.of)(e)}create(e){console.warn("Creating roles in Zitadel requires specifying a project ID");const r={...e,id:`role-${Date.now()}`,createdAt:new Date,updatedAt:new Date};return this.rolesCache.push(r),this.rolesSubject.next(this.rolesCache),(0,n.of)(r)}update(e,r){const y=this.rolesCache.findIndex(S=>S.id===e);return-1===y||this.rolesCache[y].isSystemRole?(0,n.of)(null):(this.rolesCache[y]={...this.rolesCache[y],...r,updatedAt:new Date},this.rolesSubject.next(this.rolesCache),(0,n.of)(this.rolesCache[y]))}delete(e){const r=this.rolesCache.findIndex(y=>y.id===e);return-1===r||this.rolesCache[r].isSystemRole?(0,n.of)(!1):(this.rolesCache.splice(r,1),this.rolesSubject.next(this.rolesCache),(0,n.of)(!0))}static{this.\u0275fac=function(r){return new(r||c)(s.\u0275\u0275inject(W))}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()},1985:(I,m,t)=>{t.d(m,{c:()=>u});var s=t(7707),a=t(3961),_=t(3494),n=t(1203),f=t(1026),p=t(8071),E=t(9786);let u=(()=>{class O{constructor(R){R&&(this._subscribe=R)}lift(R){const C=new O;return C.source=this,C.operator=R,C}subscribe(R,C,b){const W=function T(O){return O&&O instanceof s.vU||function P(O){return O&&(0,p.T)(O.next)&&(0,p.T)(O.error)&&(0,p.T)(O.complete)}(O)&&(0,a.Uv)(O)}(R)?R:new s.Ms(R,C,b);return(0,E.Y)(()=>{const{operator:K,source:$}=this;W.add(K?K.call(W,$):$?this._subscribe(W):this._trySubscribe(W))}),W}_trySubscribe(R){try{return this._subscribe(R)}catch(C){R.error(C)}}forEach(R,C){return new(C=d(C))((b,W)=>{const K=new s.Ms({next:$=>{try{R($)}catch(U){W(U),K.unsubscribe()}},error:W,complete:b});this.subscribe(K)})}_subscribe(R){var C;return null===(C=this.source)||void 0===C?void 0:C.subscribe(R)}[_.s](){return this}pipe(...R){return(0,n.m)(R)(this)}toPromise(R){return new(R=d(R))((C,b)=>{let W;this.subscribe(K=>W=K,K=>b(K),()=>C(W))})}}return O.create=L=>new O(L),O})();function d(O){var L;return null!==(L=O??f.$.Promise)&&void 0!==L?L:Promise}},8399:(I,m,t)=>{t.d(m,{_:()=>a});var s=t(6129);class a{constructor(n,f=a.now){this.schedulerActionCtor=n,this.now=f}schedule(n,f=0,p){return new this.schedulerActionCtor(this,n).schedule(p,f)}}a.now=s.U.now},7707:(I,m,t)=>{t.d(m,{Ms:()=>b,vU:()=>O});var s=t(8071),a=t(3961),_=t(1026),n=t(5334),f=t(5343);const p=d("C",void 0,void 0);function d(D,v,c){return{kind:D,value:v,error:c}}var P=t(9270),T=t(9786);class O extends a.yU{constructor(v){super(),this.isStopped=!1,v?(this.destination=v,(0,a.Uv)(v)&&v.add(this)):this.destination=U}static create(v,c,N){return new b(v,c,N)}next(v){this.isStopped?$(function u(D){return d("N",D,void 0)}(v),this):this._next(v)}error(v){this.isStopped?$(function E(D){return d("E",void 0,D)}(v),this):(this.isStopped=!0,this._error(v))}complete(){this.isStopped?$(p,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(v){this.destination.next(v)}_error(v){try{this.destination.error(v)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const L=Function.prototype.bind;function R(D,v){return L.call(D,v)}class C{constructor(v){this.partialObserver=v}next(v){const{partialObserver:c}=this;if(c.next)try{c.next(v)}catch(N){W(N)}}error(v){const{partialObserver:c}=this;if(c.error)try{c.error(v)}catch(N){W(N)}else W(v)}complete(){const{partialObserver:v}=this;if(v.complete)try{v.complete()}catch(c){W(c)}}}class b extends O{constructor(v,c,N){let e;if(super(),(0,s.T)(v)||!v)e={next:v??void 0,error:c??void 0,complete:N??void 0};else{let r;this&&_.$.useDeprecatedNextContext?(r=Object.create(v),r.unsubscribe=()=>this.unsubscribe(),e={next:v.next&&R(v.next,r),error:v.error&&R(v.error,r),complete:v.complete&&R(v.complete,r)}):e=v}this.destination=new C(e)}}function W(D){_.$.useDeprecatedSynchronousErrorHandling?(0,T.l)(D):(0,n.m)(D)}function $(D,v){const{onStoppedNotification:c}=_.$;c&&P.f.setTimeout(()=>c(D,v))}const U={closed:!0,next:f.l,error:function K(D){throw D},complete:f.l}},3961:(I,m,t)=>{t.d(m,{Kn:()=>f,Uv:()=>p,yU:()=>n});var s=t(8071),a=t(4079),_=t(7908);class n{constructor(d){this.initialTeardown=d,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let d;if(!this.closed){this.closed=!0;const{_parentage:P}=this;if(P)if(this._parentage=null,Array.isArray(P))for(const L of P)L.remove(this);else P.remove(this);const{initialTeardown:T}=this;if((0,s.T)(T))try{T()}catch(L){d=L instanceof a.Z?L.errors:[L]}const{_finalizers:O}=this;if(O){this._finalizers=null;for(const L of O)try{E(L)}catch(R){d=d??[],R instanceof a.Z?d=[...d,...R.errors]:d.push(R)}}if(d)throw new a.Z(d)}}add(d){var P;if(d&&d!==this)if(this.closed)E(d);else{if(d instanceof n){if(d.closed||d._hasParent(this))return;d._addParent(this)}(this._finalizers=null!==(P=this._finalizers)&&void 0!==P?P:[]).push(d)}}_hasParent(d){const{_parentage:P}=this;return P===d||Array.isArray(P)&&P.includes(d)}_addParent(d){const{_parentage:P}=this;this._parentage=Array.isArray(P)?(P.push(d),P):P?[P,d]:d}_removeParent(d){const{_parentage:P}=this;P===d?this._parentage=null:Array.isArray(P)&&(0,_.o)(P,d)}remove(d){const{_finalizers:P}=this;P&&(0,_.o)(P,d),d instanceof n&&d._removeParent(this)}}n.EMPTY=(()=>{const u=new n;return u.closed=!0,u})();const f=n.EMPTY;function p(u){return u instanceof n||u&&"closed"in u&&(0,s.T)(u.remove)&&(0,s.T)(u.add)&&(0,s.T)(u.unsubscribe)}function E(u){(0,s.T)(u)?u():u.unsubscribe()}},1026:(I,m,t)=>{t.d(m,{$:()=>s});const s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2688:(I,m,t)=>{t.d(m,{x:()=>n});var s=t(9131),a=t(9326),_=t(9724);function n(...f){return(0,s.K)()((0,_.H)(f,(0,a.lI)(f)))}},983:(I,m,t)=>{t.d(m,{I:()=>_,w:()=>a});var s=t(1985);const a=new s.c(f=>f.complete());function _(f){return f?function n(f){return new s.c(p=>f.schedule(()=>p.complete()))}(f):a}},9724:(I,m,t)=>{t.d(m,{H:()=>_});var s=t(5894),a=t(8750);function _(n,f){return f?(0,s.c)(n,f):(0,a.Tg)(n)}},8750:(I,m,t)=>{t.d(m,{Tg:()=>L});var s=t(1635),a=t(7441),_=t(9858),n=t(1985),f=t(5055),p=t(7953),E=t(591),u=t(5397),d=t(5196),P=t(8071),T=t(5334),O=t(3494);function L(D){if(D instanceof n.c)return D;if(null!=D){if((0,f.l)(D))return function R(D){return new n.c(v=>{const c=D[O.s]();if((0,P.T)(c.subscribe))return c.subscribe(v);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(D);if((0,a.X)(D))return function C(D){return new n.c(v=>{for(let c=0;c<D.length&&!v.closed;c++)v.next(D[c]);v.complete()})}(D);if((0,_.y)(D))return function b(D){return new n.c(v=>{D.then(c=>{v.closed||(v.next(c),v.complete())},c=>v.error(c)).then(null,T.m)})}(D);if((0,p.T)(D))return K(D);if((0,u.x)(D))return function W(D){return new n.c(v=>{for(const c of D)if(v.next(c),v.closed)return;v.complete()})}(D);if((0,d.U)(D))return function $(D){return K((0,d.C)(D))}(D)}throw(0,E.L)(D)}function K(D){return new n.c(v=>{(function U(D,v){var c,N,e,r;return(0,s.sH)(this,void 0,void 0,function*(){try{for(c=(0,s.xN)(D);!(N=yield c.next()).done;)if(v.next(N.value),v.closed)return}catch(y){e={error:y}}finally{try{N&&!N.done&&(r=c.return)&&(yield r.call(c))}finally{if(e)throw e.error}}v.complete()})})(D,v).catch(c=>v.error(c))})}},1807:(I,m,t)=>{t.d(m,{O:()=>f});var s=t(1985),a=t(3236),_=t(9470),n=t(8211);function f(p=0,E,u=a.b){let d=-1;return null!=E&&((0,_.m)(E)?u=E:d=E),new s.c(P=>{let T=(0,n.v)(p)?+p-u.now():p;T<0&&(T=0);let O=0;return u.schedule(function(){P.closed||(P.next(O++),0<=d?this.schedule(void 0,d):P.complete())},T)})}},4360:(I,m,t)=>{t.d(m,{H:()=>_,_:()=>a});var s=t(7707);function a(n,f,p,E,u){return new _(n,f,p,E,u)}class _ extends s.vU{constructor(f,p,E,u,d,P){super(f),this.onFinalize=d,this.shouldUnsubscribe=P,this._next=p?function(T){try{p(T)}catch(O){f.error(O)}}:super._next,this._error=u?function(T){try{u(T)}catch(O){f.error(O)}finally{this.unsubscribe()}}:super._error,this._complete=E?function(){try{E()}catch(T){f.error(T)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var f;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:p}=this;super.unsubscribe(),!p&&(null===(f=this.onFinalize)||void 0===f||f.call(this))}}}},9437:(I,m,t)=>{t.d(m,{W:()=>n});var s=t(8750),a=t(4360),_=t(9974);function n(f){return(0,_.N)((p,E)=>{let P,u=null,d=!1;u=p.subscribe((0,a._)(E,void 0,void 0,T=>{P=(0,s.Tg)(f(T,n(f)(p))),u?(u.unsubscribe(),u=null,P.subscribe(E)):d=!0})),d&&(u.unsubscribe(),u=null,P.subscribe(E))})}},9131:(I,m,t)=>{t.d(m,{K:()=>a});var s=t(6365);function a(){return(0,s.U)(1)}},3103:(I,m,t)=>{t.d(m,{c:()=>n});var s=t(3236),a=t(3183),_=t(1807);function n(f,p=s.E){const E=(0,_.O)(f,p);return(0,a.o)(()=>E)}},3183:(I,m,t)=>{t.d(m,{o:()=>E});var s=t(2688),a=t(6697),_=t(3557),n=t(3703),f=t(3028),p=t(8750);function E(u,d){return d?P=>(0,s.x)(d.pipe((0,a.s)(1),(0,_.w)()),P.pipe(E(u))):(0,f.Z)((P,T)=>(0,p.Tg)(u(P,T)).pipe((0,a.s)(1),(0,n.u)(P)))}},3557:(I,m,t)=>{t.d(m,{w:()=>n});var s=t(9974),a=t(4360),_=t(5343);function n(){return(0,s.N)((f,p)=>{f.subscribe((0,a._)(p,_.l))})}},6354:(I,m,t)=>{t.d(m,{T:()=>_});var s=t(9974),a=t(4360);function _(n,f){return(0,s.N)((p,E)=>{let u=0;p.subscribe((0,a._)(E,d=>{E.next(n.call(f,d,u++))}))})}},3703:(I,m,t)=>{t.d(m,{u:()=>a});var s=t(6354);function a(_){return(0,s.T)(()=>_)}},6365:(I,m,t)=>{t.d(m,{U:()=>_});var s=t(3028),a=t(3669);function _(n=1/0){return(0,s.Z)(a.D,n)}},5412:(I,m,t)=>{t.d(m,{h:()=>n});var s=t(8750),a=t(5225),_=t(4360);function n(f,p,E,u,d,P,T,O){const L=[];let R=0,C=0,b=!1;const W=()=>{b&&!L.length&&!R&&p.complete()},K=U=>R<u?$(U):L.push(U),$=U=>{P&&p.next(U),R++;let D=!1;(0,s.Tg)(E(U,C++)).subscribe((0,_._)(p,v=>{d?.(v),P?K(v):p.next(v)},()=>{D=!0},void 0,()=>{if(D)try{for(R--;L.length&&R<u;){const v=L.shift();T?(0,a.N)(p,T,()=>$(v)):$(v)}W()}catch(v){p.error(v)}}))};return f.subscribe((0,_._)(p,K,()=>{b=!0,W()})),()=>{O?.()}}},3028:(I,m,t)=>{t.d(m,{Z:()=>p});var s=t(6354),a=t(8750),_=t(9974),n=t(5412),f=t(8071);function p(E,u,d=1/0){return(0,f.T)(u)?p((P,T)=>(0,s.T)((O,L)=>u(P,O,T,L))((0,a.Tg)(E(P,T))),d):("number"==typeof u&&(d=u),(0,_.N)((P,T)=>(0,n.h)(P,T,E,d)))}},941:(I,m,t)=>{t.d(m,{Q:()=>n});var s=t(5225),a=t(9974),_=t(4360);function n(f,p=0){return(0,a.N)((E,u)=>{E.subscribe((0,_._)(u,d=>(0,s.N)(u,f,()=>u.next(d),p),()=>(0,s.N)(u,f,()=>u.complete(),p),d=>(0,s.N)(u,f,()=>u.error(d),p)))})}},6745:(I,m,t)=>{t.d(m,{_:()=>a});var s=t(9974);function a(_,n=0){return(0,s.N)((f,p)=>{p.add(_.schedule(()=>f.subscribe(p),n))})}},5558:(I,m,t)=>{t.d(m,{n:()=>n});var s=t(8750),a=t(9974),_=t(4360);function n(f,p){return(0,a.N)((E,u)=>{let d=null,P=0,T=!1;const O=()=>T&&!d&&u.complete();E.subscribe((0,_._)(u,L=>{d?.unsubscribe();let R=0;const C=P++;(0,s.Tg)(f(L,C)).subscribe(d=(0,_._)(u,b=>u.next(p?p(L,b,C,R++):b),()=>{d=null,O()}))},()=>{T=!0,O()}))})}},6697:(I,m,t)=>{t.d(m,{s:()=>n});var s=t(983),a=t(9974),_=t(4360);function n(f){return f<=0?()=>s.w:(0,a.N)((p,E)=>{let u=0;p.subscribe((0,_._)(E,d=>{++u<=f&&(E.next(d),f<=u&&E.complete())}))})}},7119:(I,m,t)=>{t.d(m,{S:()=>f});var s=t(1985),a=t(4761),_=t(8071),n=t(5225);function f(p,E){return new s.c(u=>{let d;return(0,n.N)(u,E,()=>{d=p[a.l](),(0,n.N)(u,E,()=>{let P,T;try{({value:P,done:T}=d.next())}catch(O){return void u.error(O)}T?u.complete():u.next(P)},0,!0)}),()=>(0,_.T)(d?.return)&&d.return()})}},5894:(I,m,t)=>{t.d(m,{c:()=>$});var s=t(8750),a=t(941),_=t(6745),p=t(1985),u=t(7119),d=t(5225);function P(U,D){if(!U)throw new Error("Iterable cannot be null");return new p.c(v=>{(0,d.N)(v,D,()=>{const c=U[Symbol.asyncIterator]();(0,d.N)(v,D,()=>{c.next().then(N=>{N.done?v.complete():v.next(N.value)})},0,!0)})})}var T=t(5055),O=t(9858),L=t(7441),R=t(5397),C=t(7953),b=t(591),W=t(5196);function $(U,D){if(null!=U){if((0,T.l)(U))return function n(U,D){return(0,s.Tg)(U).pipe((0,_._)(D),(0,a.Q)(D))}(U,D);if((0,L.X)(U))return function E(U,D){return new p.c(v=>{let c=0;return D.schedule(function(){c===U.length?v.complete():(v.next(U[c++]),v.closed||this.schedule())})})}(U,D);if((0,O.y)(U))return function f(U,D){return(0,s.Tg)(U).pipe((0,_._)(D),(0,a.Q)(D))}(U,D);if((0,C.T)(U))return P(U,D);if((0,R.x)(U))return(0,u.S)(U,D);if((0,W.U)(U))return function K(U,D){return P((0,W.C)(U),D)}(U,D)}throw(0,b.L)(U)}},6780:(I,m,t)=>{t.d(m,{R:()=>f});var s=t(3961);class a extends s.yU{constructor(E,u){super()}schedule(E,u=0){return this}}const _={setInterval(p,E,...u){const{delegate:d}=_;return d?.setInterval?d.setInterval(p,E,...u):setInterval(p,E,...u)},clearInterval(p){const{delegate:E}=_;return(E?.clearInterval||clearInterval)(p)},delegate:void 0};var n=t(7908);class f extends a{constructor(E,u){super(E,u),this.scheduler=E,this.work=u,this.pending=!1}schedule(E,u=0){var d;if(this.closed)return this;this.state=E;const P=this.id,T=this.scheduler;return null!=P&&(this.id=this.recycleAsyncId(T,P,u)),this.pending=!0,this.delay=u,this.id=null!==(d=this.id)&&void 0!==d?d:this.requestAsyncId(T,this.id,u),this}requestAsyncId(E,u,d=0){return _.setInterval(E.flush.bind(E,this),d)}recycleAsyncId(E,u,d=0){if(null!=d&&this.delay===d&&!1===this.pending)return u;null!=u&&_.clearInterval(u)}execute(E,u){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const d=this._execute(E,u);if(d)return d;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(E,u){let P,d=!1;try{this.work(E)}catch(T){d=!0,P=T||new Error("Scheduled action threw falsy error")}if(d)return this.unsubscribe(),P}unsubscribe(){if(!this.closed){const{id:E,scheduler:u}=this,{actions:d}=u;this.work=this.state=this.scheduler=null,this.pending=!1,(0,n.o)(d,this),null!=E&&(this.id=this.recycleAsyncId(u,E,null)),this.delay=null,super.unsubscribe()}}}},707:(I,m,t)=>{t.d(m,{q:()=>a});var s=t(8399);class a extends s._{constructor(n,f=s._.now){super(n,f),this.actions=[],this._active=!1}flush(n){const{actions:f}=this;if(this._active)return void f.push(n);let p;this._active=!0;do{if(p=n.execute(n.state,n.delay))break}while(n=f.shift());if(this._active=!1,p){for(;n=f.shift();)n.unsubscribe();throw p}}}},3236:(I,m,t)=>{t.d(m,{E:()=>_,b:()=>n});var s=t(6780);const _=new(t(707).q)(s.R),n=_},6129:(I,m,t)=>{t.d(m,{U:()=>s});const s={now:()=>(s.delegate||Date).now(),delegate:void 0}},9270:(I,m,t)=>{t.d(m,{f:()=>s});const s={setTimeout(a,_,...n){const{delegate:f}=s;return f?.setTimeout?f.setTimeout(a,_,...n):setTimeout(a,_,...n)},clearTimeout(a){const{delegate:_}=s;return(_?.clearTimeout||clearTimeout)(a)},delegate:void 0}},4761:(I,m,t)=>{t.d(m,{l:()=>a});const a=function s(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(I,m,t)=>{t.d(m,{s:()=>s});const s="function"==typeof Symbol&&Symbol.observable||"@@observable"},4079:(I,m,t)=>{t.d(m,{Z:()=>a});const a=(0,t(1853).L)(_=>function(f){_(this),this.message=f?`${f.length} errors occurred during unsubscription:\n${f.map((p,E)=>`${E+1}) ${p.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=f})},9326:(I,m,t)=>{t.d(m,{R0:()=>p,lI:()=>f,ms:()=>n});var s=t(8071),a=t(9470);function _(E){return E[E.length-1]}function n(E){return(0,s.T)(_(E))?E.pop():void 0}function f(E){return(0,a.m)(_(E))?E.pop():void 0}function p(E,u){return"number"==typeof _(E)?E.pop():u}},7908:(I,m,t)=>{function s(a,_){if(a){const n=a.indexOf(_);0<=n&&a.splice(n,1)}}t.d(m,{o:()=>s})},1853:(I,m,t)=>{function s(a){const n=a(f=>{Error.call(f),f.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}t.d(m,{L:()=>s})},9786:(I,m,t)=>{t.d(m,{Y:()=>_,l:()=>n});var s=t(1026);let a=null;function _(f){if(s.$.useDeprecatedSynchronousErrorHandling){const p=!a;if(p&&(a={errorThrown:!1,error:null}),f(),p){const{errorThrown:E,error:u}=a;if(a=null,E)throw u}}else f()}function n(f){s.$.useDeprecatedSynchronousErrorHandling&&a&&(a.errorThrown=!0,a.error=f)}},5225:(I,m,t)=>{function s(a,_,n,f=0,p=!1){const E=_.schedule(function(){n(),p?a.add(this.schedule(null,f)):this.unsubscribe()},f);if(a.add(E),!p)return E}t.d(m,{N:()=>s})},3669:(I,m,t)=>{function s(a){return a}t.d(m,{D:()=>s})},7441:(I,m,t)=>{t.d(m,{X:()=>s});const s=a=>a&&"number"==typeof a.length&&"function"!=typeof a},7953:(I,m,t)=>{t.d(m,{T:()=>a});var s=t(8071);function a(_){return Symbol.asyncIterator&&(0,s.T)(_?.[Symbol.asyncIterator])}},8211:(I,m,t)=>{function s(a){return a instanceof Date&&!isNaN(a)}t.d(m,{v:()=>s})},8071:(I,m,t)=>{function s(a){return"function"==typeof a}t.d(m,{T:()=>s})},5055:(I,m,t)=>{t.d(m,{l:()=>_});var s=t(3494),a=t(8071);function _(n){return(0,a.T)(n[s.s])}},5397:(I,m,t)=>{t.d(m,{x:()=>_});var s=t(4761),a=t(8071);function _(n){return(0,a.T)(n?.[s.l])}},9858:(I,m,t)=>{t.d(m,{y:()=>a});var s=t(8071);function a(_){return(0,s.T)(_?.then)}},5196:(I,m,t)=>{t.d(m,{C:()=>_,U:()=>n});var s=t(1635),a=t(8071);function _(f){return(0,s.AQ)(this,arguments,function*(){const E=f.getReader();try{for(;;){const{value:u,done:d}=yield(0,s.N3)(E.read());if(d)return yield(0,s.N3)(void 0);yield yield(0,s.N3)(u)}}finally{E.releaseLock()}})}function n(f){return(0,a.T)(f?.getReader)}},9470:(I,m,t)=>{t.d(m,{m:()=>a});var s=t(8071);function a(_){return _&&(0,s.T)(_.schedule)}},9974:(I,m,t)=>{t.d(m,{N:()=>_,S:()=>a});var s=t(8071);function a(n){return(0,s.T)(n?.lift)}function _(n){return f=>{if(a(f))return f.lift(function(p){try{return n(p,this)}catch(E){this.error(E)}});throw new TypeError("Unable to lift unknown Observable type")}}},5343:(I,m,t)=>{function s(){}t.d(m,{l:()=>s})},1203:(I,m,t)=>{t.d(m,{F:()=>a,m:()=>_});var s=t(3669);function a(...n){return _(n)}function _(n){return 0===n.length?s.D:1===n.length?n[0]:function(p){return n.reduce((E,u)=>u(E),p)}}},5334:(I,m,t)=>{t.d(m,{m:()=>_});var s=t(1026),a=t(9270);function _(n){a.f.setTimeout(()=>{const{onUnhandledError:f}=s.$;if(!f)throw n;f(n)})}},591:(I,m,t)=>{function s(a){return new TypeError(`You provided ${null!==a&&"object"==typeof a?"an invalid object":`'${a}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}t.d(m,{L:()=>s})},467:(I,m,t)=>{function s(_,n,f,p,E,u,d){try{var P=_[u](d),T=P.value}catch(O){return void f(O)}P.done?n(T):Promise.resolve(T).then(p,E)}function a(_){return function(){var n=this,f=arguments;return new Promise(function(p,E){var u=_.apply(n,f);function d(T){s(u,p,E,d,P,"next",T)}function P(T){s(u,p,E,d,P,"throw",T)}d(void 0)})}}t.d(m,{A:()=>a})},1635:(I,m,t)=>{function O(i,o,l,h){return new(l||(l=Promise))(function(g,M){function B(F){try{w(h.next(F))}catch(H){M(H)}}function Z(F){try{w(h.throw(F))}catch(H){M(H)}}function w(F){F.done?g(F.value):function A(g){return g instanceof l?g:new l(function(M){M(g)})}(F.value).then(B,Z)}w((h=h.apply(i,o||[])).next())})}function D(i){return this instanceof D?(this.v=i,this):new D(i)}function v(i,o,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A,h=l.apply(i,o||[]),g=[];return A=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),B("next"),B("throw"),B("return",function M(x){return function(z){return Promise.resolve(z).then(x,H)}}),A[Symbol.asyncIterator]=function(){return this},A;function B(x,z){h[x]&&(A[x]=function(G){return new Promise(function(Y,J){g.push([x,G,Y,J])>1||Z(x,G)})},z&&(A[x]=z(A[x])))}function Z(x,z){try{!function w(x){x.value instanceof D?Promise.resolve(x.value.v).then(F,H):q(g[0][2],x)}(h[x](z))}catch(G){q(g[0][3],G)}}function F(x){Z("next",x)}function H(x){Z("throw",x)}function q(x,z){x(z),g.shift(),g.length&&Z(g[0][0],g[0][1])}}function N(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,o=i[Symbol.asyncIterator];return o?o.call(i):(i=function b(i){var o="function"==typeof Symbol&&Symbol.iterator,l=o&&i[o],h=0;if(l)return l.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&h>=i.length&&(i=void 0),{value:i&&i[h++],done:!i}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),l={},h("next"),h("throw"),h("return"),l[Symbol.asyncIterator]=function(){return this},l);function h(g){l[g]=i[g]&&function(M){return new Promise(function(B,Z){!function A(g,M,B,Z){Promise.resolve(Z).then(function(w){g({value:w,done:B})},M)}(B,Z,(M=i[g](M)).done,M.value)})}}}t.d(m,{AQ:()=>v,N3:()=>D,sH:()=>O,xN:()=>N}),"function"==typeof SuppressedError&&SuppressedError}}]);