(self.webpackChunkmfe_MY_SALES=self.webpackChunkmfe_MY_SALES||[]).push([[92],{92:(y,l,t)=>{t.r(l),t.d(l,{AppComponent:()=>O});var r=t(4482),d=t(6092),n=t(4332),f=t(8490);function u(v,C){1&v&&(n.\u0275\u0275elementStart(0,"div",11),n.\u0275\u0275text(1," \u23f3 Loading incentives from API... "),n.\u0275\u0275elementEnd())}function p(v,C){if(1&v&&(n.\u0275\u0275elementStart(0,"div",12),n.\u0275\u0275text(1," \u274c "),n.\u0275\u0275elementStart(2,"strong"),n.\u0275\u0275text(3,"Error:"),n.\u0275\u0275elementEnd(),n.\u0275\u0275text(4),n.\u0275\u0275elementStart(5,"div",13),n.\u0275\u0275text(6," Check browser console for details "),n.\u0275\u0275elementEnd()()),2&v){const b=n.\u0275\u0275nextContext();n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate1(" ",b.incentivesError," ")}}function e(v,C){if(1&v&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275text(1," \u2705 "),n.\u0275\u0275elementStart(2,"strong"),n.\u0275\u0275text(3,"API Connected Successfully!"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"div",15),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(6,"div",16),n.\u0275\u0275text(7),n.\u0275\u0275pipe(8,"json"),n.\u0275\u0275elementEnd()()),2&v){const b=n.\u0275\u0275nextContext();n.\u0275\u0275advance(5),n.\u0275\u0275textInterpolate1(" Incentives loaded: ",(null==b.incentivesData||null==b.incentivesData.data?null:b.incentivesData.data.length)||0," records "),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(8,2,b.incentivesData)," ")}}let O=(()=>{class v{constructor(b){this.dataService=b,this.title="mfe-MY_SALES",this.incentivesData=null,this.incentivesError=null,this.isLoadingIncentives=!1,console.log("In mfe-MY_SALES constructor")}ngOnInit(){console.log("IN ngOnInit of mfe-MY_SALES"),this.loadIncentives()}loadIncentives(){console.log("Loading incentives from API..."),this.isLoadingIncentives=!0,this.incentivesError=null;try{this.dataService.getIncentives().subscribe({next:b=>{console.log("Incentives API response:",b),this.incentivesData=b,this.isLoadingIncentives=!1},error:b=>{console.error("Error loading incentives:",b),this.incentivesError=b.message||"Failed to load incentives",this.isLoadingIncentives=!1}})}catch(b){console.error("Exception loading incentives:",b),this.incentivesError=b.message||"Failed to load incentives",this.isLoadingIncentives=!1}}login(){}logout(){}static{this.\u0275fac=function(M){return new(M||v)(n.\u0275\u0275directiveInject(f.u))}}static{this.\u0275cmp=n.\u0275\u0275defineComponent({type:v,selectors:[["app-root"]],standalone:!0,features:[n.\u0275\u0275StandaloneFeature],decls:16,vars:3,consts:[[1,"app-container"],[1,"app-header"],[1,"header-content"],[1,"app-title"],[1,"app-main"],[1,"api-status",2,"background","#f5f5f5","padding","15px","margin-bottom","20px","border-radius","8px"],[2,"margin-top","0"],["style","color: #0066cc;",4,"ngIf"],["style","color: #d32f2f; padding: 10px; background: #ffebee; border-radius: 4px;",4,"ngIf"],["style","color: #2e7d32;",4,"ngIf"],[1,"app-footer"],[2,"color","#0066cc"],[2,"color","#d32f2f","padding","10px","background","#ffebee","border-radius","4px"],[2,"margin-top","10px","font-size","12px","font-family","monospace"],[2,"color","#2e7d32"],[2,"margin-top","10px","font-size","14px"],[2,"margin-top","10px","font-size","12px","font-family","monospace","background","white","padding","10px","border-radius","4px","max-height","200px","overflow","auto"]],template:function(M,I){1&M&&(n.\u0275\u0275elementStart(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1",3),n.\u0275\u0275text(4,"\u{1f4bc} My Sales"),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(5,"main",4)(6,"div",5)(7,"h3",6),n.\u0275\u0275text(8,"\u{1f50c} API Status"),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(9,u,2,0,"div",7)(10,p,7,1,"div",8)(11,e,9,4,"div",9),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(12,"app-sales-history"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(13,"footer",10)(14,"p"),n.\u0275\u0275text(15,"\xa9 2025 Sales Management System - mfe-MY_SALES"),n.\u0275\u0275elementEnd()()()),2&M&&(n.\u0275\u0275advance(9),n.\u0275\u0275property("ngIf",I.isLoadingIncentives),n.\u0275\u0275advance(),n.\u0275\u0275property("ngIf",I.incentivesError),n.\u0275\u0275advance(),n.\u0275\u0275property("ngIf",I.incentivesData&&!I.isLoadingIncentives))},dependencies:[r.CommonModule,r.NgIf,r.JsonPipe,d.K],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;background-color:#f8f9fa}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06c,#004d99);color:#fff;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;position:sticky;top:0;z-index:1020}.app-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:1.5rem 2rem;display:flex;justify-content:space-between;align-items:center}.app-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;display:flex;align-items:center;gap:.5rem}.app-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.app-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{font-size:.875rem;padding:.25rem 1rem;background-color:#fff3;border-radius:.75rem;backdrop-filter:blur(10px)}.app-main[_ngcontent-%COMP%]{flex:1;width:100%}.app-footer[_ngcontent-%COMP%]{background-color:#343a40;color:#ced4da;padding:1.5rem 2rem;text-align:center;font-size:.875rem}.app-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}@media (max-width: 991.98px){.app-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{padding:1rem;flex-direction:column;align-items:flex-start;gap:1rem}.app-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.25rem}}"]})}}return v})()},5357:(y,l,t)=>{t.d(l,{EG:()=>c,FP:()=>d,e9:()=>s,i3:()=>r});const r={enabled:!0,baseUrl:"https://noq8dav0ac.execute-api.us-east-1.amazonaws.com/db",endpoints:{users:"/users",sales:"/sales",auth:"/auth",incentives:"/incentives"}};function s(f){return`${r.baseUrl}${f}`}function d(){return r.enabled}function c(){const f=function n(){return sessionStorage.getItem("org")||sessionStorage.getItem("brandId")}();if(f)return s(`${r.endpoints.incentives}/${f}`);throw new Error('Organization/Brand not found in sessionStorage. Set "org" or "brandId" in sessionStorage.')}},5749:(y,l,t)=>{t.d(l,{i:()=>r});const r={useGraphQL:!1,graphqlEndpoint:"https://api.example.com/graphql",mockDataDelay:300,useMockData:!1}},1070:(y,l,t)=>{t.d(l,{I:()=>u});var r=t(8662);const d=[{name:"Enterprise Software License",category:r.ProductCategory.SOFTWARE,basePrice:5e4},{name:"Cloud Storage Solution",category:r.ProductCategory.SERVICES,basePrice:25e3},{name:"Server Hardware",category:r.ProductCategory.HARDWARE,basePrice:35e3},{name:"IoT Device Package",category:r.ProductCategory.ELECTRONICS,basePrice:15e3},{name:"Consulting Services",category:r.ProductCategory.SERVICES,basePrice:2e4},{name:"Mobile App Development",category:r.ProductCategory.SOFTWARE,basePrice:45e3},{name:"Security Suite",category:r.ProductCategory.SOFTWARE,basePrice:3e4},{name:"Network Infrastructure",category:r.ProductCategory.HARDWARE,basePrice:6e4}],n=["Acme Corporation","Tech Innovations Inc","Global Solutions Ltd","Digital Dynamics","Future Systems","Smart Technologies","Enterprise Solutions","Cloud Masters"],c=["North","South","East","West","Central"],u={users:[{id:"1",name:"John Doe",email:"john.doe@example.com",role:r.UserRole.SUPER_ADMIN},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",role:r.UserRole.ORG_ADMIN},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",role:r.UserRole.TEAM_LEAD,teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",role:r.UserRole.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",role:r.UserRole.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",role:r.UserRole.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"}],products:d,clients:n,regions:c,salesRecords:function f(){const p=[{id:"user-4",name:"Alice Sales"},{id:"user-5",name:"Bob Sales"},{id:"user-6",name:"Carol Sales"}],e=[r.SalesStatus.COMPLETED,r.SalesStatus.COMPLETED,r.SalesStatus.COMPLETED,r.SalesStatus.PENDING,r.SalesStatus.CANCELLED],O=[];let v=1;for(let C=0;C<50;C++){const b=p[C%p.length],M=d[Math.floor(Math.random()*d.length)],I=n[Math.floor(Math.random()*n.length)],B=c[Math.floor(Math.random()*c.length)],S=e[Math.floor(Math.random()*e.length)],T=M.basePrice+(1e4*Math.random()-5e3),L=.05*T,g=new Date;g.setDate(g.getDate()-Math.floor(180*Math.random())),O.push({id:"sale-"+v++,salesExecutiveId:b.id,salesExecutiveName:b.name,productName:M.name,productCategory:M.category,amount:Math.round(T),commission:Math.round(L),status:S,date:g,clientName:I,region:B})}return O.sort((C,b)=>b.date.getTime()-C.date.getTime())}()}},1949:(y,l,t)=>{t.d(l,{c:()=>d,t:()=>s});const s={endpoint:t(5749).i.graphqlEndpoint||"https://api.example.com/graphql",headers:{"Content-Type":"application/json"}};function d(){return{...s.headers}}},9775:(y,l,t)=>{t.d(l,{$:()=>s.$,W:()=>r.W});var r=t(2233),s=t(6662)},2233:(y,l,t)=>{t.d(l,{W:()=>r});const r={GET_SALES_HISTORY:"\n    query GetSalesHistory($userId: ID!, $startDate: DateTime, $endDate: DateTime) {\n      salesHistory(userId: $userId, startDate: $startDate, endDate: $endDate) {\n        id\n        salesExecutiveId\n        salesExecutiveName\n        productName\n        productCategory\n        amount\n        commission\n        status\n        date\n        clientName\n        region\n      }\n    }\n  ",GET_SALES_SUMMARY:"\n    query GetSalesSummary($userId: ID!) {\n      salesSummary(userId: $userId) {\n        totalSales\n        totalCommission\n        completedCount\n        pendingCount\n        cancelledCount\n      }\n    }\n  ",GET_ALL_SALES:"\n    query GetAllSales {\n      allSales {\n        id\n        salesExecutiveId\n        salesExecutiveName\n        productName\n        productCategory\n        amount\n        commission\n        status\n        date\n        clientName\n        region\n      }\n    }\n  "}},6662:(y,l,t)=>{t.d(l,{$:()=>r});const r={GET_ALL_USERS:"\n    query GetAllUsers {\n      users {\n        id\n        name\n        email\n        role\n        teamId\n        managerId\n      }\n    }\n  ",GET_CURRENT_USER:"\n    query GetCurrentUser {\n      currentUser {\n        id\n        name\n        email\n        role\n        teamId\n        managerId\n      }\n    }\n  ",GET_VIEWABLE_USERS:"\n    query GetViewableUsers($userId: ID!) {\n      viewableUsers(userId: $userId) {\n        id\n        name\n        email\n        role\n        teamId\n        managerId\n      }\n    }\n  "}},6092:(y,l,t)=>{t.d(l,{K:()=>L});var r=t(4482),d=t(3425),c=t(6977),f=t(8141),u=t(8662),e=t(4332);function v(g,h){if(1&g&&(e.\u0275\u0275elementStart(0,"p",8),e.\u0275\u0275text(1," Viewing sales for: "),e.\u0275\u0275elementStart(2,"strong"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"json"),e.\u0275\u0275elementEnd()()),2&g){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(o.selectedUserId===o.currentUser.id?"You":e.\u0275\u0275pipeBind1(4,1,o.viewableUsers))}}function C(g,h){if(1&g&&(e.\u0275\u0275elementStart(0,"option",13),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&g){const o=h.$implicit;e.\u0275\u0275property("value",o.id),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate2(" ",o.name," (",o.email,") ")}}function b(g,h){if(1&g){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"label",10),e.\u0275\u0275text(2,"Select Sales Executive:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"select",11),e.\u0275\u0275listener("change",function(U){e.\u0275\u0275restoreView(o);const N=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(N.onUserChange(U))}),e.\u0275\u0275template(4,C,2,3,"option",12),e.\u0275\u0275elementEnd()()}if(2&g){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("value",o.selectedUserId||""),e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",o.viewableUsers)}}function M(g,h){if(1&g&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",15)(2,"div",16),e.\u0275\u0275text(3,"\u{1f4b0}"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",17)(5,"p",18),e.\u0275\u0275text(6,"Total Sales"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"p",19),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",15)(10,"div",20),e.\u0275\u0275text(11,"\u{1f4b5}"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",17)(13,"p",18),e.\u0275\u0275text(14,"Total Commission"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",19),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",15)(18,"div",21),e.\u0275\u0275text(19,"\u2705"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",17)(21,"p",18),e.\u0275\u0275text(22,"Completed"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"p",19),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"div",15)(26,"div",22),e.\u0275\u0275text(27,"\u23f3"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",17)(29,"p",18),e.\u0275\u0275text(30,"Pending"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"p",19),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(33,"div",15)(34,"div",23),e.\u0275\u0275text(35,"\u274c"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",17)(37,"p",18),e.\u0275\u0275text(38,"Cancelled"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"p",19),e.\u0275\u0275text(40),e.\u0275\u0275elementEnd()()()()),2&g){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(o.formatCurrency(o.salesSummary.totalSales)),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(o.formatCurrency(o.salesSummary.totalCommission)),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(o.salesSummary.completedCount),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(o.salesSummary.pendingCount),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(o.salesSummary.cancelledCount)}}function I(g,h){1&g&&(e.\u0275\u0275elementStart(0,"div",24),e.\u0275\u0275element(1,"div",25),e.\u0275\u0275elementStart(2,"p"),e.\u0275\u0275text(3,"Loading sales data..."),e.\u0275\u0275elementEnd()())}function B(g,h){if(1&g&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td",29),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td",30),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td")(16,"span",31),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()()()),2&g){const o=h.$implicit,D=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(D.formatDate(o.date)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(o.clientName),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(o.productName),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(o.productCategory),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(o.region),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(D.formatCurrency(o.amount)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(D.formatCurrency(o.commission)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",D.getStatusClass(o.status)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",o.status," ")}}function S(g,h){if(1&g&&(e.\u0275\u0275elementStart(0,"div",26)(1,"table",27)(2,"thead")(3,"tr")(4,"th"),e.\u0275\u0275text(5,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"th"),e.\u0275\u0275text(7,"Client"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th"),e.\u0275\u0275text(9,"Product"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11,"Category"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Region"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"th"),e.\u0275\u0275text(15,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th"),e.\u0275\u0275text(17,"Commission"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"th"),e.\u0275\u0275text(19,"Status"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"tbody"),e.\u0275\u0275template(21,B,18,9,"tr",28),e.\u0275\u0275elementEnd()()()),2&g){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(21),e.\u0275\u0275property("ngForOf",o.salesRecords)}}function T(g,h){1&g&&(e.\u0275\u0275elementStart(0,"div",32)(1,"div",33),e.\u0275\u0275text(2,"\u{1f4ca}"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"h2"),e.\u0275\u0275text(4,"No Sales Records Found"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"p"),e.\u0275\u0275text(6,"There are no sales records to display at this time."),e.\u0275\u0275elementEnd()())}let L=(()=>{class g{constructor(o,D){this.roleService=o,this.salesDataService=D,this.currentUser=null,this.salesRecords=[],this.salesSummary=null,this.selectedUserId=null,this.viewableUsers=[],this.isLoading=!1,this.SalesStatus=u.SalesStatus,this.destroy$=new d.Subject}ngOnInit(){this.roleService.currentUser$.pipe((0,c.Q)(this.destroy$),(0,f.M)(o=>{console.log("In sales history the role service is ...",o)})).subscribe(o=>{this.currentUser=o,o&&(this.selectedUserId=o.id,this.viewableUsers=this.roleService.getViewableUsers(),this.loadSalesData(o.id))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadSalesData(o){this.isLoading=!0,this.selectedUserId=o,this.salesDataService.getSalesHistory(o).pipe((0,c.Q)(this.destroy$)).subscribe(D=>{this.salesRecords=D,this.isLoading=!1}),this.salesDataService.getSalesSummary(o).pipe((0,c.Q)(this.destroy$)).subscribe(D=>{this.salesSummary=D})}onUserChange(o){const U=o.target.value;U&&this.loadSalesData(U)}canViewMultipleUsers(){return this.roleService.isTeamLeadOrHigher()}getStatusClass(o){switch(o){case u.SalesStatus.COMPLETED:return"status-completed";case u.SalesStatus.PENDING:return"status-pending";case u.SalesStatus.CANCELLED:return"status-cancelled";default:return""}}formatCurrency(o){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o)}formatDate(o){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(o))}static{this.\u0275fac=function(D){return new(D||g)(e.\u0275\u0275directiveInject(u.RoleService),e.\u0275\u0275directiveInject(u.SalesDataService))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["app-sales-history"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:10,vars:6,consts:[[1,"sales-history-container"],[1,"header"],["class","subtitle",4,"ngIf"],["class","user-selector",4,"ngIf"],["class","summary-cards",4,"ngIf"],["class","loading",4,"ngIf"],["class","sales-table-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"subtitle"],[1,"user-selector"],["for","userSelect"],["id","userSelect",3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"summary-cards"],[1,"summary-card"],[1,"card-icon","completed"],[1,"card-content"],[1,"card-label"],[1,"card-value"],[1,"card-icon","commission"],[1,"card-icon","info"],[1,"card-icon","warning"],[1,"card-icon","danger"],[1,"loading"],[1,"spinner"],[1,"sales-table-container"],[1,"sales-table"],[4,"ngFor","ngForOf"],[1,"amount"],[1,"commission"],[1,"status-badge",3,"ngClass"],[1,"empty-state"],[1,"empty-icon"]],template:function(D,U){1&D&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h1"),e.\u0275\u0275text(3,"Sales History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,v,5,3,"p",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,b,5,2,"div",3)(6,M,41,5,"div",4)(7,I,4,0,"div",5)(8,S,22,1,"div",6)(9,T,7,0,"div",7),e.\u0275\u0275elementEnd()),2&D&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",U.currentUser),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",U.canViewMultipleUsers()&&U.viewableUsers.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",U.salesSummary),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",U.isLoading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!U.isLoading&&U.salesRecords.length>0),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!U.isLoading&&0===U.salesRecords.length))},dependencies:[r.CommonModule,r.NgClass,r.NgForOf,r.NgIf,r.JsonPipe],styles:[".sales-history-container[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.sales-history-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:2rem}.sales-history-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#212529;margin-bottom:.5rem}.sales-history-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem}.sales-history-container[_ngcontent-%COMP%]   .user-selector[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;padding:1.5rem;margin-bottom:2rem;display:flex;align-items:center;gap:1rem}.sales-history-container[_ngcontent-%COMP%]   .user-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#495057;white-space:nowrap}.sales-history-container[_ngcontent-%COMP%]   .user-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;padding:.5rem 1rem;border:1px solid #dee2e6;border-radius:.375rem;font-size:1rem;background-color:#fff;cursor:pointer;transition:all .2s ease-in-out}.sales-history-container[_ngcontent-%COMP%]   .user-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#06c}.sales-history-container[_ngcontent-%COMP%]   .user-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#06c;box-shadow:0 0 0 3px #0066cc1a}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;margin-bottom:2rem}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;padding:1.5rem;display:flex;align-items:center;gap:1rem;transition:all .2s ease-in-out}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;transform:translateY(-2px)}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:60px;height:60px;display:flex;justify-content:center;align-items:center;border-radius:.5rem;flex-shrink:0}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon.completed[_ngcontent-%COMP%]{background-color:#28a7451a}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon.commission[_ngcontent-%COMP%]{background-color:#0066cc1a}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon.info[_ngcontent-%COMP%]{background-color:#17a2b81a}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon.warning[_ngcontent-%COMP%]{background-color:#ffc1071a}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-icon.danger[_ngcontent-%COMP%]{background-color:#dc35451a}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex:1}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d;margin-bottom:.25rem}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#212529}.sales-history-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;padding:3rem;color:#6c757d}.sales-history-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #e9ecef;border-top-color:#06c;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;padding:1.5rem;overflow-x:auto}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e9ecef;border-radius:.25rem}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ced4da;border-radius:.25rem}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#adb5bd}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f8f9fa}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:2px solid #dee2e6}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-weight:600;color:#495057;font-size:.875rem;text-transform:uppercase;letter-spacing:.05em}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;transition:all .15s ease-in-out}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;color:#343a40;font-size:.875rem}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.amount[_ngcontent-%COMP%], .sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.commission[_ngcontent-%COMP%]{font-weight:500;font-family:Courier New,monospace}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.amount[_ngcontent-%COMP%]{color:#212529}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.commission[_ngcontent-%COMP%]{color:#28a745}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;border-radius:.75rem;font-size:.75rem;font-weight:500;text-transform:capitalize}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status-badge.status-completed[_ngcontent-%COMP%]{background-color:#28a7451a;color:#1e7e34}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status-badge.status-pending[_ngcontent-%COMP%]{background-color:#ffc1071a;color:#a07800}.sales-history-container[_ngcontent-%COMP%]   .sales-table-container[_ngcontent-%COMP%]   .sales-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background-color:#dc35451a;color:#bd2130}.sales-history-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;padding:1.5rem;display:flex;justify-content:center;align-items:center;flex-direction:column;padding:3rem;text-align:center}.sales-history-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1.5rem;opacity:.5}.sales-history-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#495057;margin-bottom:.5rem}.sales-history-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 991.98px){.sales-history-container[_ngcontent-%COMP%]{padding:1rem}.sales-history-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return g})()},8490:(y,l,t)=>{t.d(l,{u:()=>M});var r=t(3425),d=t(3103),n=t(6354),c=t(1070),f=t(5749),u=t(5357),p=t(1949),e=t(9775),O=t(4332),C=t(4230);let M=(()=>{class I{constructor(S){this.http=S}getIncentives(){if((0,u.FP)()){const S=(0,u.EG)();return this.http.get(S)}return(0,r.of)({success:!0,message:"Mock data",data:[]}).pipe((0,d.c)(f.i.mockDataDelay||300))}getSalesHistory(S,T,L){if(f.i.useGraphQL)return this.queryGraphQL(e.W.GET_SALES_HISTORY,{userId:S,startDate:T?.toISOString(),endDate:L?.toISOString()}).pipe((0,n.T)(g=>g.data.salesHistory));if((0,u.FP)()){const g=(0,u.e9)(`${u.i3.endpoints.sales}/history/${S}`),h={};return T&&(h.startDate=T.toISOString()),L&&(h.endDate=L.toISOString()),this.http.get(g,{params:h})}return this.getMockSalesHistory(S,T,L)}getSalesSummary(S){if(f.i.useGraphQL)return this.queryGraphQL(e.W.GET_SALES_SUMMARY,{userId:S}).pipe((0,n.T)(T=>T.data.salesSummary));if((0,u.FP)()){const T=(0,u.e9)(`${u.i3.endpoints.sales}/summary/${S}`);return this.http.get(T)}return this.getMockSalesSummary(S)}getAllSales(){if(f.i.useGraphQL)return this.queryGraphQL(e.W.GET_ALL_SALES).pipe((0,n.T)(S=>S.data.allSales));if((0,u.FP)()){const S=(0,u.e9)(u.i3.endpoints.sales);return this.http.get(S)}return this.getMockAllSales()}getAllUsers(){if(f.i.useGraphQL)return this.queryGraphQL(e.$.GET_ALL_USERS).pipe((0,n.T)(S=>S.data.users));if((0,u.FP)()){const S=(0,u.e9)(u.i3.endpoints.users);return this.http.get(S)}return this.getMockUsers()}getCurrentUser(){if((0,u.FP)()){const S=(0,u.e9)(`${u.i3.endpoints.auth}/me`);return this.http.get(S)}return(0,r.of)(c.I.users[0]).pipe((0,d.c)(f.i.mockDataDelay||300))}queryGraphQL(S,T){const L=(0,p.c)();return this.http.post(p.t.endpoint,{query:S,variables:T},{headers:L})}getMockSalesHistory(S,T,L){let g=c.I.salesRecords.filter(h=>h.salesExecutiveId===S);return T&&(g=g.filter(h=>h.date>=T)),L&&(g=g.filter(h=>h.date<=L)),(0,r.of)(g).pipe((0,d.c)(f.i.mockDataDelay||300))}getMockSalesSummary(S){const T=c.I.salesRecords.filter(g=>g.salesExecutiveId===S),L={totalSales:T.filter(g=>"completed"===g.status).reduce((g,h)=>g+h.amount,0),totalCommission:T.filter(g=>"completed"===g.status).reduce((g,h)=>g+h.commission,0),completedCount:T.filter(g=>"completed"===g.status).length,pendingCount:T.filter(g=>"pending"===g.status).length,cancelledCount:T.filter(g=>"cancelled"===g.status).length};return(0,r.of)(L).pipe((0,d.c)(f.i.mockDataDelay||300))}getMockAllSales(){return(0,r.of)(c.I.salesRecords).pipe((0,d.c)(f.i.mockDataDelay||300))}getMockUsers(){return(0,r.of)(c.I.users).pipe((0,d.c)(f.i.mockDataDelay||300))}static{this.\u0275fac=function(T){return new(T||I)(O.\u0275\u0275inject(C.HttpClient))}}static{this.\u0275prov=O.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})()},1985:(y,l,t)=>{t.d(l,{c:()=>p});var r=t(7707),s=t(3961),d=t(3494),n=t(1203),c=t(1026),f=t(8071),u=t(9786);let p=(()=>{class C{constructor(M){M&&(this._subscribe=M)}lift(M){const I=new C;return I.source=this,I.operator=M,I}subscribe(M,I,B){const S=function v(C){return C&&C instanceof r.vU||function O(C){return C&&(0,f.T)(C.next)&&(0,f.T)(C.error)&&(0,f.T)(C.complete)}(C)&&(0,s.Uv)(C)}(M)?M:new r.Ms(M,I,B);return(0,u.Y)(()=>{const{operator:T,source:L}=this;S.add(T?T.call(S,L):L?this._subscribe(S):this._trySubscribe(S))}),S}_trySubscribe(M){try{return this._subscribe(M)}catch(I){M.error(I)}}forEach(M,I){return new(I=e(I))((B,S)=>{const T=new r.Ms({next:L=>{try{M(L)}catch(g){S(g),T.unsubscribe()}},error:S,complete:B});this.subscribe(T)})}_subscribe(M){var I;return null===(I=this.source)||void 0===I?void 0:I.subscribe(M)}[d.s](){return this}pipe(...M){return(0,n.m)(M)(this)}toPromise(M){return new(M=e(M))((I,B)=>{let S;this.subscribe(T=>S=T,T=>B(T),()=>I(S))})}}return C.create=b=>new C(b),C})();function e(C){var b;return null!==(b=C??c.$.Promise)&&void 0!==b?b:Promise}},8399:(y,l,t)=>{t.d(l,{_:()=>s});var r=t(6129);class s{constructor(n,c=s.now){this.schedulerActionCtor=n,this.now=c}schedule(n,c=0,f){return new this.schedulerActionCtor(this,n).schedule(f,c)}}s.now=r.U.now},7707:(y,l,t)=>{t.d(l,{Ms:()=>B,vU:()=>C});var r=t(8071),s=t(3961),d=t(1026),n=t(5334),c=t(5343);const f=e("C",void 0,void 0);function e(h,o,D){return{kind:h,value:o,error:D}}var O=t(9270),v=t(9786);class C extends s.yU{constructor(o){super(),this.isStopped=!1,o?(this.destination=o,(0,s.Uv)(o)&&o.add(this)):this.destination=g}static create(o,D,U){return new B(o,D,U)}next(o){this.isStopped?L(function p(h){return e("N",h,void 0)}(o),this):this._next(o)}error(o){this.isStopped?L(function u(h){return e("E",void 0,h)}(o),this):(this.isStopped=!0,this._error(o))}complete(){this.isStopped?L(f,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(o){this.destination.next(o)}_error(o){try{this.destination.error(o)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const b=Function.prototype.bind;function M(h,o){return b.call(h,o)}class I{constructor(o){this.partialObserver=o}next(o){const{partialObserver:D}=this;if(D.next)try{D.next(o)}catch(U){S(U)}}error(o){const{partialObserver:D}=this;if(D.error)try{D.error(o)}catch(U){S(U)}else S(o)}complete(){const{partialObserver:o}=this;if(o.complete)try{o.complete()}catch(D){S(D)}}}class B extends C{constructor(o,D,U){let N;if(super(),(0,r.T)(o)||!o)N={next:o??void 0,error:D??void 0,complete:U??void 0};else{let G;this&&d.$.useDeprecatedNextContext?(G=Object.create(o),G.unsubscribe=()=>this.unsubscribe(),N={next:o.next&&M(o.next,G),error:o.error&&M(o.error,G),complete:o.complete&&M(o.complete,G)}):N=o}this.destination=new I(N)}}function S(h){d.$.useDeprecatedSynchronousErrorHandling?(0,v.l)(h):(0,n.m)(h)}function L(h,o){const{onStoppedNotification:D}=d.$;D&&O.f.setTimeout(()=>D(h,o))}const g={closed:!0,next:c.l,error:function T(h){throw h},complete:c.l}},3961:(y,l,t)=>{t.d(l,{Kn:()=>c,Uv:()=>f,yU:()=>n});var r=t(8071),s=t(4079),d=t(7908);class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:O}=this;if(O)if(this._parentage=null,Array.isArray(O))for(const b of O)b.remove(this);else O.remove(this);const{initialTeardown:v}=this;if((0,r.T)(v))try{v()}catch(b){e=b instanceof s.Z?b.errors:[b]}const{_finalizers:C}=this;if(C){this._finalizers=null;for(const b of C)try{u(b)}catch(M){e=e??[],M instanceof s.Z?e=[...e,...M.errors]:e.push(M)}}if(e)throw new s.Z(e)}}add(e){var O;if(e&&e!==this)if(this.closed)u(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(O=this._finalizers)&&void 0!==O?O:[]).push(e)}}_hasParent(e){const{_parentage:O}=this;return O===e||Array.isArray(O)&&O.includes(e)}_addParent(e){const{_parentage:O}=this;this._parentage=Array.isArray(O)?(O.push(e),O):O?[O,e]:e}_removeParent(e){const{_parentage:O}=this;O===e?this._parentage=null:Array.isArray(O)&&(0,d.o)(O,e)}remove(e){const{_finalizers:O}=this;O&&(0,d.o)(O,e),e instanceof n&&e._removeParent(this)}}n.EMPTY=(()=>{const p=new n;return p.closed=!0,p})();const c=n.EMPTY;function f(p){return p instanceof n||p&&"closed"in p&&(0,r.T)(p.remove)&&(0,r.T)(p.add)&&(0,r.T)(p.unsubscribe)}function u(p){(0,r.T)(p)?p():p.unsubscribe()}},1026:(y,l,t)=>{t.d(l,{$:()=>r});const r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2688:(y,l,t)=>{t.d(l,{x:()=>n});var r=t(9131),s=t(9326),d=t(9724);function n(...c){return(0,r.K)()((0,d.H)(c,(0,s.lI)(c)))}},983:(y,l,t)=>{t.d(l,{I:()=>d,w:()=>s});var r=t(1985);const s=new r.c(c=>c.complete());function d(c){return c?function n(c){return new r.c(f=>c.schedule(()=>f.complete()))}(c):s}},9724:(y,l,t)=>{t.d(l,{H:()=>d});var r=t(5894),s=t(8750);function d(n,c){return c?(0,r.c)(n,c):(0,s.Tg)(n)}},8750:(y,l,t)=>{t.d(l,{Tg:()=>b});var r=t(1635),s=t(7441),d=t(9858),n=t(1985),c=t(5055),f=t(7953),u=t(591),p=t(5397),e=t(5196),O=t(8071),v=t(5334),C=t(3494);function b(h){if(h instanceof n.c)return h;if(null!=h){if((0,c.l)(h))return function M(h){return new n.c(o=>{const D=h[C.s]();if((0,O.T)(D.subscribe))return D.subscribe(o);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(h);if((0,s.X)(h))return function I(h){return new n.c(o=>{for(let D=0;D<h.length&&!o.closed;D++)o.next(h[D]);o.complete()})}(h);if((0,d.y)(h))return function B(h){return new n.c(o=>{h.then(D=>{o.closed||(o.next(D),o.complete())},D=>o.error(D)).then(null,v.m)})}(h);if((0,f.T)(h))return T(h);if((0,p.x)(h))return function S(h){return new n.c(o=>{for(const D of h)if(o.next(D),o.closed)return;o.complete()})}(h);if((0,e.U)(h))return function L(h){return T((0,e.C)(h))}(h)}throw(0,u.L)(h)}function T(h){return new n.c(o=>{(function g(h,o){var D,U,N,G;return(0,r.sH)(this,void 0,void 0,function*(){try{for(D=(0,r.xN)(h);!(U=yield D.next()).done;)if(o.next(U.value),o.closed)return}catch(z){N={error:z}}finally{try{U&&!U.done&&(G=D.return)&&(yield G.call(D))}finally{if(N)throw N.error}}o.complete()})})(h,o).catch(D=>o.error(D))})}},1807:(y,l,t)=>{t.d(l,{O:()=>c});var r=t(1985),s=t(3236),d=t(9470),n=t(8211);function c(f=0,u,p=s.b){let e=-1;return null!=u&&((0,d.m)(u)?p=u:e=u),new r.c(O=>{let v=(0,n.v)(f)?+f-p.now():f;v<0&&(v=0);let C=0;return p.schedule(function(){O.closed||(O.next(C++),0<=e?this.schedule(void 0,e):O.complete())},v)})}},4360:(y,l,t)=>{t.d(l,{H:()=>d,_:()=>s});var r=t(7707);function s(n,c,f,u,p){return new d(n,c,f,u,p)}class d extends r.vU{constructor(c,f,u,p,e,O){super(c),this.onFinalize=e,this.shouldUnsubscribe=O,this._next=f?function(v){try{f(v)}catch(C){c.error(C)}}:super._next,this._error=p?function(v){try{p(v)}catch(C){c.error(C)}finally{this.unsubscribe()}}:super._error,this._complete=u?function(){try{u()}catch(v){c.error(v)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var c;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:f}=this;super.unsubscribe(),!f&&(null===(c=this.onFinalize)||void 0===c||c.call(this))}}}},9131:(y,l,t)=>{t.d(l,{K:()=>s});var r=t(6365);function s(){return(0,r.U)(1)}},3103:(y,l,t)=>{t.d(l,{c:()=>n});var r=t(3236),s=t(3183),d=t(1807);function n(c,f=r.E){const u=(0,d.O)(c,f);return(0,s.o)(()=>u)}},3183:(y,l,t)=>{t.d(l,{o:()=>u});var r=t(2688),s=t(6697),d=t(3557),n=t(3703),c=t(3028),f=t(8750);function u(p,e){return e?O=>(0,r.x)(e.pipe((0,s.s)(1),(0,d.w)()),O.pipe(u(p))):(0,c.Z)((O,v)=>(0,f.Tg)(p(O,v)).pipe((0,s.s)(1),(0,n.u)(O)))}},3557:(y,l,t)=>{t.d(l,{w:()=>n});var r=t(9974),s=t(4360),d=t(5343);function n(){return(0,r.N)((c,f)=>{c.subscribe((0,s._)(f,d.l))})}},6354:(y,l,t)=>{t.d(l,{T:()=>d});var r=t(9974),s=t(4360);function d(n,c){return(0,r.N)((f,u)=>{let p=0;f.subscribe((0,s._)(u,e=>{u.next(n.call(c,e,p++))}))})}},3703:(y,l,t)=>{t.d(l,{u:()=>s});var r=t(6354);function s(d){return(0,r.T)(()=>d)}},6365:(y,l,t)=>{t.d(l,{U:()=>d});var r=t(3028),s=t(3669);function d(n=1/0){return(0,r.Z)(s.D,n)}},5412:(y,l,t)=>{t.d(l,{h:()=>n});var r=t(8750),s=t(5225),d=t(4360);function n(c,f,u,p,e,O,v,C){const b=[];let M=0,I=0,B=!1;const S=()=>{B&&!b.length&&!M&&f.complete()},T=g=>M<p?L(g):b.push(g),L=g=>{O&&f.next(g),M++;let h=!1;(0,r.Tg)(u(g,I++)).subscribe((0,d._)(f,o=>{e?.(o),O?T(o):f.next(o)},()=>{h=!0},void 0,()=>{if(h)try{for(M--;b.length&&M<p;){const o=b.shift();v?(0,s.N)(f,v,()=>L(o)):L(o)}S()}catch(o){f.error(o)}}))};return c.subscribe((0,d._)(f,T,()=>{B=!0,S()})),()=>{C?.()}}},3028:(y,l,t)=>{t.d(l,{Z:()=>f});var r=t(6354),s=t(8750),d=t(9974),n=t(5412),c=t(8071);function f(u,p,e=1/0){return(0,c.T)(p)?f((O,v)=>(0,r.T)((C,b)=>p(O,C,v,b))((0,s.Tg)(u(O,v))),e):("number"==typeof p&&(e=p),(0,d.N)((O,v)=>(0,n.h)(O,v,u,e)))}},941:(y,l,t)=>{t.d(l,{Q:()=>n});var r=t(5225),s=t(9974),d=t(4360);function n(c,f=0){return(0,s.N)((u,p)=>{u.subscribe((0,d._)(p,e=>(0,r.N)(p,c,()=>p.next(e),f),()=>(0,r.N)(p,c,()=>p.complete(),f),e=>(0,r.N)(p,c,()=>p.error(e),f)))})}},6745:(y,l,t)=>{t.d(l,{_:()=>s});var r=t(9974);function s(d,n=0){return(0,r.N)((c,f)=>{f.add(d.schedule(()=>c.subscribe(f),n))})}},6697:(y,l,t)=>{t.d(l,{s:()=>n});var r=t(983),s=t(9974),d=t(4360);function n(c){return c<=0?()=>r.w:(0,s.N)((f,u)=>{let p=0;f.subscribe((0,d._)(u,e=>{++p<=c&&(u.next(e),c<=p&&u.complete())}))})}},6977:(y,l,t)=>{t.d(l,{Q:()=>c});var r=t(9974),s=t(4360),d=t(8750),n=t(5343);function c(f){return(0,r.N)((u,p)=>{(0,d.Tg)(f).subscribe((0,s._)(p,()=>p.complete(),n.l)),!p.closed&&u.subscribe(p)})}},8141:(y,l,t)=>{t.d(l,{M:()=>c});var r=t(8071),s=t(9974),d=t(4360),n=t(3669);function c(f,u,p){const e=(0,r.T)(f)||u||p?{next:f,error:u,complete:p}:f;return e?(0,s.N)((O,v)=>{var C;null===(C=e.subscribe)||void 0===C||C.call(e);let b=!0;O.subscribe((0,d._)(v,M=>{var I;null===(I=e.next)||void 0===I||I.call(e,M),v.next(M)},()=>{var M;b=!1,null===(M=e.complete)||void 0===M||M.call(e),v.complete()},M=>{var I;b=!1,null===(I=e.error)||void 0===I||I.call(e,M),v.error(M)},()=>{var M,I;b&&(null===(M=e.unsubscribe)||void 0===M||M.call(e)),null===(I=e.finalize)||void 0===I||I.call(e)}))}):n.D}},7119:(y,l,t)=>{t.d(l,{S:()=>c});var r=t(1985),s=t(4761),d=t(8071),n=t(5225);function c(f,u){return new r.c(p=>{let e;return(0,n.N)(p,u,()=>{e=f[s.l](),(0,n.N)(p,u,()=>{let O,v;try{({value:O,done:v}=e.next())}catch(C){return void p.error(C)}v?p.complete():p.next(O)},0,!0)}),()=>(0,d.T)(e?.return)&&e.return()})}},5894:(y,l,t)=>{t.d(l,{c:()=>L});var r=t(8750),s=t(941),d=t(6745),f=t(1985),p=t(7119),e=t(5225);function O(g,h){if(!g)throw new Error("Iterable cannot be null");return new f.c(o=>{(0,e.N)(o,h,()=>{const D=g[Symbol.asyncIterator]();(0,e.N)(o,h,()=>{D.next().then(U=>{U.done?o.complete():o.next(U.value)})},0,!0)})})}var v=t(5055),C=t(9858),b=t(7441),M=t(5397),I=t(7953),B=t(591),S=t(5196);function L(g,h){if(null!=g){if((0,v.l)(g))return function n(g,h){return(0,r.Tg)(g).pipe((0,d._)(h),(0,s.Q)(h))}(g,h);if((0,b.X)(g))return function u(g,h){return new f.c(o=>{let D=0;return h.schedule(function(){D===g.length?o.complete():(o.next(g[D++]),o.closed||this.schedule())})})}(g,h);if((0,C.y)(g))return function c(g,h){return(0,r.Tg)(g).pipe((0,d._)(h),(0,s.Q)(h))}(g,h);if((0,I.T)(g))return O(g,h);if((0,M.x)(g))return(0,p.S)(g,h);if((0,S.U)(g))return function T(g,h){return O((0,S.C)(g),h)}(g,h)}throw(0,B.L)(g)}},6780:(y,l,t)=>{t.d(l,{R:()=>c});var r=t(3961);class s extends r.yU{constructor(u,p){super()}schedule(u,p=0){return this}}const d={setInterval(f,u,...p){const{delegate:e}=d;return e?.setInterval?e.setInterval(f,u,...p):setInterval(f,u,...p)},clearInterval(f){const{delegate:u}=d;return(u?.clearInterval||clearInterval)(f)},delegate:void 0};var n=t(7908);class c extends s{constructor(u,p){super(u,p),this.scheduler=u,this.work=p,this.pending=!1}schedule(u,p=0){var e;if(this.closed)return this;this.state=u;const O=this.id,v=this.scheduler;return null!=O&&(this.id=this.recycleAsyncId(v,O,p)),this.pending=!0,this.delay=p,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(v,this.id,p),this}requestAsyncId(u,p,e=0){return d.setInterval(u.flush.bind(u,this),e)}recycleAsyncId(u,p,e=0){if(null!=e&&this.delay===e&&!1===this.pending)return p;null!=p&&d.clearInterval(p)}execute(u,p){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const e=this._execute(u,p);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(u,p){let O,e=!1;try{this.work(u)}catch(v){e=!0,O=v||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),O}unsubscribe(){if(!this.closed){const{id:u,scheduler:p}=this,{actions:e}=p;this.work=this.state=this.scheduler=null,this.pending=!1,(0,n.o)(e,this),null!=u&&(this.id=this.recycleAsyncId(p,u,null)),this.delay=null,super.unsubscribe()}}}},707:(y,l,t)=>{t.d(l,{q:()=>s});var r=t(8399);class s extends r._{constructor(n,c=r._.now){super(n,c),this.actions=[],this._active=!1}flush(n){const{actions:c}=this;if(this._active)return void c.push(n);let f;this._active=!0;do{if(f=n.execute(n.state,n.delay))break}while(n=c.shift());if(this._active=!1,f){for(;n=c.shift();)n.unsubscribe();throw f}}}},3236:(y,l,t)=>{t.d(l,{E:()=>d,b:()=>n});var r=t(6780);const d=new(t(707).q)(r.R),n=d},6129:(y,l,t)=>{t.d(l,{U:()=>r});const r={now:()=>(r.delegate||Date).now(),delegate:void 0}},9270:(y,l,t)=>{t.d(l,{f:()=>r});const r={setTimeout(s,d,...n){const{delegate:c}=r;return c?.setTimeout?c.setTimeout(s,d,...n):setTimeout(s,d,...n)},clearTimeout(s){const{delegate:d}=r;return(d?.clearTimeout||clearTimeout)(s)},delegate:void 0}},4761:(y,l,t)=>{t.d(l,{l:()=>s});const s=function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(y,l,t)=>{t.d(l,{s:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},4079:(y,l,t)=>{t.d(l,{Z:()=>s});const s=(0,t(1853).L)(d=>function(c){d(this),this.message=c?`${c.length} errors occurred during unsubscription:\n${c.map((f,u)=>`${u+1}) ${f.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=c})},9326:(y,l,t)=>{t.d(l,{R0:()=>f,lI:()=>c,ms:()=>n});var r=t(8071),s=t(9470);function d(u){return u[u.length-1]}function n(u){return(0,r.T)(d(u))?u.pop():void 0}function c(u){return(0,s.m)(d(u))?u.pop():void 0}function f(u,p){return"number"==typeof d(u)?u.pop():p}},7908:(y,l,t)=>{function r(s,d){if(s){const n=s.indexOf(d);0<=n&&s.splice(n,1)}}t.d(l,{o:()=>r})},1853:(y,l,t)=>{function r(s){const n=s(c=>{Error.call(c),c.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}t.d(l,{L:()=>r})},9786:(y,l,t)=>{t.d(l,{Y:()=>d,l:()=>n});var r=t(1026);let s=null;function d(c){if(r.$.useDeprecatedSynchronousErrorHandling){const f=!s;if(f&&(s={errorThrown:!1,error:null}),c(),f){const{errorThrown:u,error:p}=s;if(s=null,u)throw p}}else c()}function n(c){r.$.useDeprecatedSynchronousErrorHandling&&s&&(s.errorThrown=!0,s.error=c)}},5225:(y,l,t)=>{function r(s,d,n,c=0,f=!1){const u=d.schedule(function(){n(),f?s.add(this.schedule(null,c)):this.unsubscribe()},c);if(s.add(u),!f)return u}t.d(l,{N:()=>r})},3669:(y,l,t)=>{function r(s){return s}t.d(l,{D:()=>r})},7441:(y,l,t)=>{t.d(l,{X:()=>r});const r=s=>s&&"number"==typeof s.length&&"function"!=typeof s},7953:(y,l,t)=>{t.d(l,{T:()=>s});var r=t(8071);function s(d){return Symbol.asyncIterator&&(0,r.T)(d?.[Symbol.asyncIterator])}},8211:(y,l,t)=>{function r(s){return s instanceof Date&&!isNaN(s)}t.d(l,{v:()=>r})},8071:(y,l,t)=>{function r(s){return"function"==typeof s}t.d(l,{T:()=>r})},5055:(y,l,t)=>{t.d(l,{l:()=>d});var r=t(3494),s=t(8071);function d(n){return(0,s.T)(n[r.s])}},5397:(y,l,t)=>{t.d(l,{x:()=>d});var r=t(4761),s=t(8071);function d(n){return(0,s.T)(n?.[r.l])}},9858:(y,l,t)=>{t.d(l,{y:()=>s});var r=t(8071);function s(d){return(0,r.T)(d?.then)}},5196:(y,l,t)=>{t.d(l,{C:()=>d,U:()=>n});var r=t(1635),s=t(8071);function d(c){return(0,r.AQ)(this,arguments,function*(){const u=c.getReader();try{for(;;){const{value:p,done:e}=yield(0,r.N3)(u.read());if(e)return yield(0,r.N3)(void 0);yield yield(0,r.N3)(p)}}finally{u.releaseLock()}})}function n(c){return(0,s.T)(c?.getReader)}},9470:(y,l,t)=>{t.d(l,{m:()=>s});var r=t(8071);function s(d){return d&&(0,r.T)(d.schedule)}},9974:(y,l,t)=>{t.d(l,{N:()=>d,S:()=>s});var r=t(8071);function s(n){return(0,r.T)(n?.lift)}function d(n){return c=>{if(s(c))return c.lift(function(f){try{return n(f,this)}catch(u){this.error(u)}});throw new TypeError("Unable to lift unknown Observable type")}}},5343:(y,l,t)=>{function r(){}t.d(l,{l:()=>r})},1203:(y,l,t)=>{t.d(l,{F:()=>s,m:()=>d});var r=t(3669);function s(...n){return d(n)}function d(n){return 0===n.length?r.D:1===n.length?n[0]:function(f){return n.reduce((u,p)=>p(u),f)}}},5334:(y,l,t)=>{t.d(l,{m:()=>d});var r=t(1026),s=t(9270);function d(n){s.f.setTimeout(()=>{const{onUnhandledError:c}=r.$;if(!c)throw n;c(n)})}},591:(y,l,t)=>{function r(s){return new TypeError(`You provided ${null!==s&&"object"==typeof s?"an invalid object":`'${s}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}t.d(l,{L:()=>r})},1635:(y,l,t)=>{function C(a,i,_,m){return new(_||(_=Promise))(function(E,x){function R(K){try{A(m.next(K))}catch(w){x(w)}}function F(K){try{A(m.throw(K))}catch(w){x(w)}}function A(K){K.done?E(K.value):function P(E){return E instanceof _?E:new _(function(x){x(E)})}(K.value).then(R,F)}A((m=m.apply(a,i||[])).next())})}function h(a){return this instanceof h?(this.v=a,this):new h(a)}function o(a,i,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P,m=_.apply(a,i||[]),E=[];return P=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),R("next"),R("throw"),R("return",function x(W){return function(j){return Promise.resolve(j).then(W,w)}}),P[Symbol.asyncIterator]=function(){return this},P;function R(W,j){m[W]&&(P[W]=function($){return new Promise(function(H,Q){E.push([W,$,H,Q])>1||F(W,$)})},j&&(P[W]=j(P[W])))}function F(W,j){try{!function A(W){W.value instanceof h?Promise.resolve(W.value.v).then(K,w):Y(E[0][2],W)}(m[W](j))}catch($){Y(E[0][3],$)}}function K(W){F("next",W)}function w(W){F("throw",W)}function Y(W,j){W(j),E.shift(),E.length&&F(E[0][0],E[0][1])}}function U(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,i=a[Symbol.asyncIterator];return i?i.call(a):(a=function B(a){var i="function"==typeof Symbol&&Symbol.iterator,_=i&&a[i],m=0;if(_)return _.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&m>=a.length&&(a=void 0),{value:a&&a[m++],done:!a}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),_={},m("next"),m("throw"),m("return"),_[Symbol.asyncIterator]=function(){return this},_);function m(E){_[E]=a[E]&&function(x){return new Promise(function(R,F){!function P(E,x,R,F){Promise.resolve(F).then(function(A){E({value:A,done:R})},x)}(R,F,(x=a[E](x)).done,x.value)})}}}t.d(l,{AQ:()=>o,N3:()=>h,sH:()=>C,xN:()=>U}),"function"==typeof SuppressedError&&SuppressedError}}]);