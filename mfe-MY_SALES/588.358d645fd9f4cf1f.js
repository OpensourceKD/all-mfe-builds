(self.webpackChunkmfe_MY_SALES=self.webpackChunkmfe_MY_SALES||[]).push([[588],{2588:(v,c,e)=>{e.r(c),e.d(c,{AuthService:()=>d,CoreServicesComponent:()=>i,CoreServicesService:()=>l,ProductCategory:()=>E,RoleService:()=>n,SalesDataService:()=>M,SalesStatus:()=>r,UserRole:()=>t});var s=e(4332);let l=(()=>{class u{constructor(){}static{this.\u0275fac=function(_){return new(_||u)}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})(),d=(()=>{class u{constructor(){this.id="auth of pokemon",console.log("In constructor of auth service in pokemon")}static{this.\u0275fac=function(_){return new(_||u)}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})(),i=(()=>{class u{static{this.\u0275fac=function(_){return new(_||u)}}static{this.\u0275cmp=s.\u0275\u0275defineComponent({type:u,selectors:[["org-core-services"]],standalone:!0,features:[s.\u0275\u0275StandaloneFeature],decls:2,vars:0,template:function(_,P){1&_&&(s.\u0275\u0275elementStart(0,"p"),s.\u0275\u0275text(1," core-services works! "),s.\u0275\u0275elementEnd())}})}}return u})();var a=e(3425),t=function(u){return u.SUPER_ADMIN="super-admin",u.ORG_ADMIN="org-admin",u.TEAM_LEAD="team-lead",u.SALES_EXECUTIVE="sales-executive",u}(t||{});let n=(()=>{class u{constructor(){this.currentUserSubject=new a.BehaviorSubject(this.getDummyUser()),this.currentUser$=this.currentUserSubject.asObservable()}getCurrentUser(){return this.currentUserSubject.value}setCurrentUser(h){this.currentUserSubject.next(h)}hasRole(h){return this.getCurrentUser()?.role===h}hasAnyRole(h){const _=this.getCurrentUser();return!!_&&h.includes(_.role)}isAdmin(){return this.hasAnyRole([t.SUPER_ADMIN,t.ORG_ADMIN])}isTeamLeadOrHigher(){return this.hasAnyRole([t.SUPER_ADMIN,t.ORG_ADMIN,t.TEAM_LEAD])}getAllUsers(){return[{id:"user-1",name:"John Admin",email:"john.admin@company.com",role:t.SUPER_ADMIN},{id:"user-2",name:"Sarah Manager",email:"sarah.manager@company.com",role:t.ORG_ADMIN},{id:"user-3",name:"Mike Lead",email:"mike.lead@company.com",role:t.TEAM_LEAD,teamId:"team-1"},{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",role:t.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-5",name:"Bob Sales",email:"bob.sales@company.com",role:t.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"},{id:"user-6",name:"Carol Sales",email:"carol.sales@company.com",role:t.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"}]}getViewableUsers(){const h=this.getCurrentUser();if(!h)return[];const _=this.getAllUsers();return this.isTeamLeadOrHigher()?_.filter(P=>P.role===t.SALES_EXECUTIVE||P.id===h.id):_.filter(P=>P.id===h.id)}getDummyUser(){return{id:"user-4",name:"Alice Sales",email:"alice.sales@company.com",role:t.SALES_EXECUTIVE,teamId:"team-1",managerId:"user-3"}}static{this.\u0275fac=function(_){return new(_||u)}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})();var o=e(3103),r=function(u){return u.COMPLETED="completed",u.PENDING="pending",u.CANCELLED="cancelled",u}(r||{}),E=function(u){return u.ELECTRONICS="Electronics",u.SOFTWARE="Software",u.SERVICES="Services",u.HARDWARE="Hardware",u}(E||{});let M=(()=>{class u{constructor(){this.dummySalesData=this.generateDummyData()}getSalesHistory(h,_,P){let f=this.dummySalesData.filter(I=>I.salesExecutiveId===h);return _&&(f=f.filter(I=>I.date>=_)),P&&(f=f.filter(I=>I.date<=P)),(0,a.of)(f).pipe((0,o.c)(300))}getSalesSummary(h){const _=this.dummySalesData.filter(f=>f.salesExecutiveId===h),P={totalSales:_.filter(f=>f.status===r.COMPLETED).reduce((f,I)=>f+I.amount,0),totalCommission:_.filter(f=>f.status===r.COMPLETED).reduce((f,I)=>f+I.commission,0),completedCount:_.filter(f=>f.status===r.COMPLETED).length,pendingCount:_.filter(f=>f.status===r.PENDING).length,cancelledCount:_.filter(f=>f.status===r.CANCELLED).length};return(0,a.of)(P).pipe((0,o.c)(300))}getAllSales(){return(0,a.of)(this.dummySalesData).pipe((0,o.c)(300))}generateDummyData(){const h=[{name:"Enterprise Software License",category:E.SOFTWARE,basePrice:5e4},{name:"Cloud Storage Solution",category:E.SERVICES,basePrice:25e3},{name:"Server Hardware",category:E.HARDWARE,basePrice:35e3},{name:"IoT Device Package",category:E.ELECTRONICS,basePrice:15e3},{name:"Consulting Services",category:E.SERVICES,basePrice:2e4},{name:"Mobile App Development",category:E.SOFTWARE,basePrice:45e3},{name:"Security Suite",category:E.SOFTWARE,basePrice:3e4},{name:"Network Infrastructure",category:E.HARDWARE,basePrice:6e4}],_=["Acme Corporation","Tech Innovations Inc","Global Solutions Ltd","Digital Dynamics","Future Systems","Smart Technologies","Enterprise Solutions","Cloud Masters"],P=["North","South","East","West","Central"],f=[{id:"user-4",name:"Alice Sales"},{id:"user-5",name:"Bob Sales"},{id:"user-6",name:"Carol Sales"}],I=[r.COMPLETED,r.COMPLETED,r.COMPLETED,r.PENDING,r.CANCELLED],C=[];let m=1;for(let D=0;D<50;D++){const O=f[D%f.length],T=h[Math.floor(Math.random()*h.length)],S=_[Math.floor(Math.random()*_.length)],U=P[Math.floor(Math.random()*P.length)],y=I[Math.floor(Math.random()*I.length)],R=T.basePrice+(1e4*Math.random()-5e3),g=.05*R,L=new Date;L.setDate(L.getDate()-Math.floor(180*Math.random())),C.push({id:"sale-"+m++,salesExecutiveId:O.id,salesExecutiveName:O.name,productName:T.name,productCategory:T.category,amount:Math.round(R),commission:Math.round(g),status:y,date:L,clientName:S,region:U})}return C.sort((D,O)=>O.date.getTime()-D.date.getTime())}static{this.\u0275fac=function(_){return new(_||u)}}static{this.\u0275prov=s.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()},8399:(v,c,e)=>{e.d(c,{_:()=>l});var s=e(6129);class l{constructor(i,a=l.now){this.schedulerActionCtor=i,this.now=a}schedule(i,a=0,t){return new this.schedulerActionCtor(this,i).schedule(t,a)}}l.now=s.U.now},2688:(v,c,e)=>{e.d(c,{x:()=>i});var s=e(9131),l=e(9326),d=e(9724);function i(...a){return(0,s.K)()((0,d.H)(a,(0,l.lI)(a)))}},983:(v,c,e)=>{e.d(c,{I:()=>d,w:()=>l});var s=e(1985);const l=new s.c(a=>a.complete());function d(a){return a?function i(a){return new s.c(t=>a.schedule(()=>t.complete()))}(a):l}},9724:(v,c,e)=>{e.d(c,{H:()=>d});var s=e(5894),l=e(8750);function d(i,a){return a?(0,s.c)(i,a):(0,l.Tg)(i)}},1807:(v,c,e)=>{e.d(c,{O:()=>a});var s=e(1985),l=e(3236),d=e(9470),i=e(8211);function a(t=0,n,o=l.b){let r=-1;return null!=n&&((0,d.m)(n)?o=n:r=n),new s.c(E=>{let M=(0,i.v)(t)?+t-o.now():t;M<0&&(M=0);let u=0;return o.schedule(function(){E.closed||(E.next(u++),0<=r?this.schedule(void 0,r):E.complete())},M)})}},9131:(v,c,e)=>{e.d(c,{K:()=>l});var s=e(6365);function l(){return(0,s.U)(1)}},3103:(v,c,e)=>{e.d(c,{c:()=>i});var s=e(3236),l=e(3183),d=e(1807);function i(a,t=s.E){const n=(0,d.O)(a,t);return(0,l.o)(()=>n)}},3183:(v,c,e)=>{e.d(c,{o:()=>n});var s=e(2688),l=e(6697),d=e(3557),i=e(3703),a=e(3028),t=e(8750);function n(o,r){return r?E=>(0,s.x)(r.pipe((0,l.s)(1),(0,d.w)()),E.pipe(n(o))):(0,a.Z)((E,M)=>(0,t.Tg)(o(E,M)).pipe((0,l.s)(1),(0,i.u)(E)))}},3557:(v,c,e)=>{e.d(c,{w:()=>i});var s=e(9974),l=e(4360),d=e(5343);function i(){return(0,s.N)((a,t)=>{a.subscribe((0,l._)(t,d.l))})}},6354:(v,c,e)=>{e.d(c,{T:()=>d});var s=e(9974),l=e(4360);function d(i,a){return(0,s.N)((t,n)=>{let o=0;t.subscribe((0,l._)(n,r=>{n.next(i.call(a,r,o++))}))})}},3703:(v,c,e)=>{e.d(c,{u:()=>l});var s=e(6354);function l(d){return(0,s.T)(()=>d)}},6365:(v,c,e)=>{e.d(c,{U:()=>d});var s=e(3028),l=e(3669);function d(i=1/0){return(0,s.Z)(l.D,i)}},5412:(v,c,e)=>{e.d(c,{h:()=>i});var s=e(8750),l=e(5225),d=e(4360);function i(a,t,n,o,r,E,M,u){const A=[];let h=0,_=0,P=!1;const f=()=>{P&&!A.length&&!h&&t.complete()},I=m=>h<o?C(m):A.push(m),C=m=>{E&&t.next(m),h++;let D=!1;(0,s.Tg)(n(m,_++)).subscribe((0,d._)(t,O=>{r?.(O),E?I(O):t.next(O)},()=>{D=!0},void 0,()=>{if(D)try{for(h--;A.length&&h<o;){const O=A.shift();M?(0,l.N)(t,M,()=>C(O)):C(O)}f()}catch(O){t.error(O)}}))};return a.subscribe((0,d._)(t,I,()=>{P=!0,f()})),()=>{u?.()}}},3028:(v,c,e)=>{e.d(c,{Z:()=>t});var s=e(6354),l=e(8750),d=e(9974),i=e(5412),a=e(8071);function t(n,o,r=1/0){return(0,a.T)(o)?t((E,M)=>(0,s.T)((u,A)=>o(E,u,M,A))((0,l.Tg)(n(E,M))),r):("number"==typeof o&&(r=o),(0,d.N)((E,M)=>(0,i.h)(E,M,n,r)))}},941:(v,c,e)=>{e.d(c,{Q:()=>i});var s=e(5225),l=e(9974),d=e(4360);function i(a,t=0){return(0,l.N)((n,o)=>{n.subscribe((0,d._)(o,r=>(0,s.N)(o,a,()=>o.next(r),t),()=>(0,s.N)(o,a,()=>o.complete(),t),r=>(0,s.N)(o,a,()=>o.error(r),t)))})}},6745:(v,c,e)=>{e.d(c,{_:()=>l});var s=e(9974);function l(d,i=0){return(0,s.N)((a,t)=>{t.add(d.schedule(()=>a.subscribe(t),i))})}},6697:(v,c,e)=>{e.d(c,{s:()=>i});var s=e(983),l=e(9974),d=e(4360);function i(a){return a<=0?()=>s.w:(0,l.N)((t,n)=>{let o=0;t.subscribe((0,d._)(n,r=>{++o<=a&&(n.next(r),a<=o&&n.complete())}))})}},7119:(v,c,e)=>{e.d(c,{S:()=>a});var s=e(1985),l=e(4761),d=e(8071),i=e(5225);function a(t,n){return new s.c(o=>{let r;return(0,i.N)(o,n,()=>{r=t[l.l](),(0,i.N)(o,n,()=>{let E,M;try{({value:E,done:M}=r.next())}catch(u){return void o.error(u)}M?o.complete():o.next(E)},0,!0)}),()=>(0,d.T)(r?.return)&&r.return()})}},5894:(v,c,e)=>{e.d(c,{c:()=>C});var s=e(8750),l=e(941),d=e(6745),t=e(1985),o=e(7119),r=e(5225);function E(m,D){if(!m)throw new Error("Iterable cannot be null");return new t.c(O=>{(0,r.N)(O,D,()=>{const T=m[Symbol.asyncIterator]();(0,r.N)(O,D,()=>{T.next().then(S=>{S.done?O.complete():O.next(S.value)})},0,!0)})})}var M=e(5055),u=e(9858),A=e(7441),h=e(5397),_=e(7953),P=e(591),f=e(5196);function C(m,D){if(null!=m){if((0,M.l)(m))return function i(m,D){return(0,s.Tg)(m).pipe((0,d._)(D),(0,l.Q)(D))}(m,D);if((0,A.X)(m))return function n(m,D){return new t.c(O=>{let T=0;return D.schedule(function(){T===m.length?O.complete():(O.next(m[T++]),O.closed||this.schedule())})})}(m,D);if((0,u.y)(m))return function a(m,D){return(0,s.Tg)(m).pipe((0,d._)(D),(0,l.Q)(D))}(m,D);if((0,_.T)(m))return E(m,D);if((0,h.x)(m))return(0,o.S)(m,D);if((0,f.U)(m))return function I(m,D){return E((0,f.C)(m),D)}(m,D)}throw(0,P.L)(m)}},6780:(v,c,e)=>{e.d(c,{R:()=>a});var s=e(3961);class l extends s.yU{constructor(n,o){super()}schedule(n,o=0){return this}}const d={setInterval(t,n,...o){const{delegate:r}=d;return r?.setInterval?r.setInterval(t,n,...o):setInterval(t,n,...o)},clearInterval(t){const{delegate:n}=d;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};var i=e(7908);class a extends l{constructor(n,o){super(n,o),this.scheduler=n,this.work=o,this.pending=!1}schedule(n,o=0){var r;if(this.closed)return this;this.state=n;const E=this.id,M=this.scheduler;return null!=E&&(this.id=this.recycleAsyncId(M,E,o)),this.pending=!0,this.delay=o,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(M,this.id,o),this}requestAsyncId(n,o,r=0){return d.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,o,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return o;null!=o&&d.clearInterval(o)}execute(n,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,o);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,o){let E,r=!1;try{this.work(n)}catch(M){r=!0,E=M||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),E}unsubscribe(){if(!this.closed){const{id:n,scheduler:o}=this,{actions:r}=o;this.work=this.state=this.scheduler=null,this.pending=!1,(0,i.o)(r,this),null!=n&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null,super.unsubscribe()}}}},707:(v,c,e)=>{e.d(c,{q:()=>l});var s=e(8399);class l extends s._{constructor(i,a=s._.now){super(i,a),this.actions=[],this._active=!1}flush(i){const{actions:a}=this;if(this._active)return void a.push(i);let t;this._active=!0;do{if(t=i.execute(i.state,i.delay))break}while(i=a.shift());if(this._active=!1,t){for(;i=a.shift();)i.unsubscribe();throw t}}}},3236:(v,c,e)=>{e.d(c,{E:()=>d,b:()=>i});var s=e(6780);const d=new(e(707).q)(s.R),i=d},6129:(v,c,e)=>{e.d(c,{U:()=>s});const s={now:()=>(s.delegate||Date).now(),delegate:void 0}},9326:(v,c,e)=>{e.d(c,{R0:()=>t,lI:()=>a,ms:()=>i});var s=e(8071),l=e(9470);function d(n){return n[n.length-1]}function i(n){return(0,s.T)(d(n))?n.pop():void 0}function a(n){return(0,l.m)(d(n))?n.pop():void 0}function t(n,o){return"number"==typeof d(n)?n.pop():o}},5225:(v,c,e)=>{function s(l,d,i,a=0,t=!1){const n=d.schedule(function(){i(),t?l.add(this.schedule(null,a)):this.unsubscribe()},a);if(l.add(n),!t)return n}e.d(c,{N:()=>s})},8211:(v,c,e)=>{function s(l){return l instanceof Date&&!isNaN(l)}e.d(c,{v:()=>s})},9470:(v,c,e)=>{e.d(c,{m:()=>l});var s=e(8071);function l(d){return d&&(0,s.T)(d.schedule)}}}]);