(self.webpackChunkmfe_CRUD_RULES=self.webpackChunkmfe_CRUD_RULES||[]).push([[95,540,906],{2095:(D,f,t)=>{t.r(f),t.d(f,{RulesListComponent:()=>U});var i=t(4482),l=t(8972),a=t(4488),e=t(4332),g=t(9540),P=t(6906),_=t(4294);function v(p,M){if(1&p){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const w=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(w.createRule())}),e.\u0275\u0275text(1," + Create New Rule "),e.\u0275\u0275elementEnd()}}function S(p,M){1&p&&(e.\u0275\u0275elementStart(0,"div",12)(1,"p"),e.\u0275\u0275text(2,"Loading rules..."),e.\u0275\u0275elementEnd()())}function C(p,M){if(1&p){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",11),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const w=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(w.createRule())}),e.\u0275\u0275text(1," Create Your First Rule "),e.\u0275\u0275elementEnd()}}function x(p,M){if(1&p&&(e.\u0275\u0275elementStart(0,"div",13)(1,"p"),e.\u0275\u0275text(2,"No rules found."),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,C,2,0,"button",2),e.\u0275\u0275elementEnd()),2&p){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",y.canManageRules)}}function W(p,M){if(1&p&&(e.\u0275\u0275elementStart(0,"div",22)(1,"span",23),e.\u0275\u0275text(2,"Percentage:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",24),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()),2&p){const y=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("",y.percentageValue,"%")}}function L(p,M){if(1&p&&(e.\u0275\u0275elementStart(0,"div",22)(1,"span",23),e.\u0275\u0275text(2,"Fixed Amount:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",24),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"number"),e.\u0275\u0275elementEnd()()),2&p){const y=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("\u20b9",e.\u0275\u0275pipeBind1(5,1,y.fixedValue),"")}}function K(p,M){if(1&p&&(e.\u0275\u0275elementStart(0,"div",22)(1,"span",23),e.\u0275\u0275text(2,"Valid To:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span",24),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"date"),e.\u0275\u0275elementEnd()()),2&p){const y=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(5,1,y.validTo,"mediumDate"))}}function N(p,M){1&p&&(e.\u0275\u0275elementStart(0,"span",29),e.\u0275\u0275text(1,"Shared"),e.\u0275\u0275elementEnd())}function z(p,M){1&p&&(e.\u0275\u0275elementStart(0,"span",29),e.\u0275\u0275text(1,"Delegatable"),e.\u0275\u0275elementEnd())}function b(p,M){if(1&p){const y=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",30)(1,"button",31),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const w=e.\u0275\u0275nextContext().$implicit,G=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(G.editRule(w.id))}),e.\u0275\u0275text(2,"Edit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",32),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(y);const w=e.\u0275\u0275nextContext().$implicit,G=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(G.deleteRule(w))}),e.\u0275\u0275text(4,"Delete"),e.\u0275\u0275elementEnd()()}}function O(p,M){if(1&p&&(e.\u0275\u0275elementStart(0,"div",16)(1,"div",17)(2,"h3"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",18),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",19)(7,"p",20),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",21)(10,"div",22)(11,"span",23),e.\u0275\u0275text(12,"Type:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"span",24),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(15,W,5,1,"div",25)(16,L,6,3,"div",25),e.\u0275\u0275elementStart(17,"div",22)(18,"span",23),e.\u0275\u0275text(19,"Valid From:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"span",24),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(23,K,6,4,"div",25),e.\u0275\u0275elementStart(24,"div",22)(25,"span",23),e.\u0275\u0275text(26,"Created By:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"span",24),e.\u0275\u0275text(28),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(29,"div",26),e.\u0275\u0275template(30,N,2,0,"span",27)(31,z,2,0,"span",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(32,b,5,0,"div",28),e.\u0275\u0275elementEnd()),2&p){const y=M.$implicit,I=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(y.name),e.\u0275\u0275advance(),e.\u0275\u0275classMap(I.getStatusClass(y.status)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",y.status," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(y.description),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(I.getRuleTypeDisplay(y.type)),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",y.percentageValue),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",y.fixedValue),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(22,14,y.validFrom,"mediumDate")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",y.validTo),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(y.createdBy),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",y.isShared),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",y.canDelegate),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",I.canManageRules)}}function T(p,M){if(1&p&&(e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275template(1,O,33,17,"div",15),e.\u0275\u0275elementEnd()),2&p){const y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",y.filteredRules)}}let U=(()=>{class p{constructor(y,I,w){this.rulesDataService=y,this.rbacService=I,this.router=w,this.rules=[],this.filteredRules=[],this.canManageRules=!1,this.loading=!1,this.selectedStatus="all",this.RuleStatus=a.l,this.RuleType=a.D}ngOnInit(){this.canManageRules=this.rbacService.canManageRules(),this.loadRules()}loadRules(){this.loading=!0,this.rulesDataService.getRules().subscribe({next:y=>{this.rules=y,this.filterRules(),this.loading=!1},error:y=>{console.error("Error loading rules:",y),this.loading=!1}})}filterRules(){this.filteredRules="all"===this.selectedStatus?[...this.rules]:this.rules.filter(y=>y.status===this.selectedStatus)}onStatusFilterChange(y){this.selectedStatus=y,this.filterRules()}createRule(){this.router.navigate(["/rules/create"])}editRule(y){this.router.navigate(["/rules/edit",y])}deleteRule(y){confirm(`Are you sure you want to delete the rule "${y.name}"?`)&&this.rulesDataService.deleteRule(y.id).subscribe({next:I=>{I&&this.loadRules()},error:I=>{console.error("Error deleting rule:",I)}})}getStatusClass(y){return{[a.l.ACTIVE]:"status-active",[a.l.INACTIVE]:"status-inactive",[a.l.DRAFT]:"status-draft",[a.l.ARCHIVED]:"status-archived"}[y]}getRuleTypeDisplay(y){return{[a.D.PERCENTAGE]:"Percentage",[a.D.FIXED]:"Fixed Amount",[a.D.TIERED]:"Tiered",[a.D.TEAM_BASED]:"Team Based"}[y]}static{this.\u0275fac=function(I){return new(I||p)(e.\u0275\u0275directiveInject(g.RulesDataService),e.\u0275\u0275directiveInject(P.RbacService),e.\u0275\u0275directiveInject(_.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:p,selectors:[["app-rules-list"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:22,vars:9,consts:[[1,"rules-list-container"],[1,"header"],["class","btn-primary",3,"click",4,"ngIf"],[1,"filters"],["for","status-filter"],["id","status-filter",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value"],["class","loading",4,"ngIf"],["class","no-rules",4,"ngIf"],["class","rules-grid",4,"ngIf"],[1,"btn-primary",3,"click"],[1,"loading"],[1,"no-rules"],[1,"rules-grid"],["class","rule-card",4,"ngFor","ngForOf"],[1,"rule-card"],[1,"rule-header"],[1,"status-badge"],[1,"rule-body"],[1,"description"],[1,"rule-details"],[1,"detail-item"],[1,"label"],[1,"value"],["class","detail-item",4,"ngIf"],[1,"rule-tags"],["class","tag",4,"ngIf"],["class","rule-actions",4,"ngIf"],[1,"tag"],[1,"rule-actions"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"]],template:function(I,w){1&I&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h1"),e.\u0275\u0275text(3,"Incentive Rules Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,v,2,0,"button",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",3)(6,"label",4),e.\u0275\u0275text(7,"Filter by Status:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"select",5),e.\u0275\u0275twoWayListener("ngModelChange",function(Z){return e.\u0275\u0275twoWayBindingSet(w.selectedStatus,Z)||(w.selectedStatus=Z),Z}),e.\u0275\u0275listener("change",function(){return w.filterRules()}),e.\u0275\u0275elementStart(9,"option",6),e.\u0275\u0275text(10,"All"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"option",7),e.\u0275\u0275text(12,"Active"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"option",7),e.\u0275\u0275text(14,"Inactive"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"option",7),e.\u0275\u0275text(16,"Draft"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"option",7),e.\u0275\u0275text(18,"Archived"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(19,S,3,0,"div",8)(20,x,4,1,"div",9)(21,T,2,1,"div",10),e.\u0275\u0275elementEnd()),2&I&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",w.canManageRules),e.\u0275\u0275advance(4),e.\u0275\u0275twoWayProperty("ngModel",w.selectedStatus),e.\u0275\u0275advance(3),e.\u0275\u0275property("value",w.RuleStatus.ACTIVE),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",w.RuleStatus.INACTIVE),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",w.RuleStatus.DRAFT),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",w.RuleStatus.ARCHIVED),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",w.loading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!w.loading&&0===w.filteredRules.length),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!w.loading&&w.filteredRules.length>0))},dependencies:[i.CommonModule,i.NgForOf,i.NgIf,i.DecimalPipe,i.DatePipe,l.FormsModule,l.NgSelectOption,l.\u0275NgSelectMultipleOption,l.SelectControlValueAccessor,l.NgControlStatus,l.NgModel],styles:[".rules-list-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.rules-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.rules-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:600;color:var(--text-primary, #1a1a1a)}.rules-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;align-items:center;gap:1rem}.rules-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-secondary, #666)}.rules-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--border-color, #ddd);border-radius:4px;font-size:1rem;background-color:#fff;cursor:pointer}.rules-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color, #007bff)}.rules-list-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%], .rules-list-container[_ngcontent-%COMP%]   .no-rules[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:var(--text-secondary, #666)}.rules-list-container[_ngcontent-%COMP%]   .rules-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color, #e0e0e0);border-radius:8px;padding:1.5rem;transition:box-shadow .2s ease}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--text-primary, #1a1a1a);flex:1}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:600;text-transform:uppercase;margin-left:.5rem;white-space:nowrap}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-header[_ngcontent-%COMP%]   .status-badge.status-active[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-header[_ngcontent-%COMP%]   .status-badge.status-inactive[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-header[_ngcontent-%COMP%]   .status-badge.status-draft[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-header[_ngcontent-%COMP%]   .status-badge.status-archived[_ngcontent-%COMP%]{background-color:#e2e3e5;color:#383d41}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-body[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:var(--text-secondary, #666);margin-bottom:1rem;line-height:1.5}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-body[_ngcontent-%COMP%]   .rule-details[_ngcontent-%COMP%]{display:grid;gap:.5rem;margin-bottom:1rem}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-body[_ngcontent-%COMP%]   .rule-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.9rem}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-body[_ngcontent-%COMP%]   .rule-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-secondary, #666);font-weight:500}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-body[_ngcontent-%COMP%]   .rule-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--text-primary, #1a1a1a);font-weight:600}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-body[_ngcontent-%COMP%]   .rule-tags[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-body[_ngcontent-%COMP%]   .rule-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:#e7f3ff;color:#06c;border-radius:4px;font-size:.75rem;font-weight:500}.rules-list-container[_ngcontent-%COMP%]   .rule-card[_ngcontent-%COMP%]   .rule-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border-color, #e0e0e0)}.rules-list-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:var(--primary-color, #007bff);color:#fff;border:none;border-radius:4px;font-size:1rem;font-weight:500;cursor:pointer;transition:background-color .2s ease}.rules-list-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--primary-hover, #0056b3)}.rules-list-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active{transform:translateY(1px)}.rules-list-container[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{flex:1;padding:.5rem 1rem;background-color:#28a745;color:#fff;border:none;border-radius:4px;font-size:.9rem;cursor:pointer;transition:background-color .2s ease}.rules-list-container[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]:hover{background-color:#218838}.rules-list-container[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{flex:1;padding:.5rem 1rem;background-color:#dc3545;color:#fff;border:none;border-radius:4px;font-size:.9rem;cursor:pointer;transition:background-color .2s ease}.rules-list-container[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})}}return p})()},4488:(D,f,t)=>{t.d(f,{D:()=>i,l:()=>n});var i=function(l){return l.PERCENTAGE="percentage",l.FIXED="fixed",l.TIERED="tiered",l.TEAM_BASED="team_based",l}(i||{}),n=function(l){return l.ACTIVE="active",l.INACTIVE="inactive",l.DRAFT="draft",l.ARCHIVED="archived",l}(n||{})},6906:(D,f,t)=>{t.r(f),t.d(f,{RbacService:()=>a,UserRole:()=>r});var i=t(4412),n=t(4332),r=function(e){return e.SUPER_ADMIN="super-admin",e.ORG_ADMIN="org-admin",e.TEAM_LEAD="team-lead",e.SALES_EXECUTIVE="sales-executive",e}(r||{});let a=(()=>{class e{constructor(){this.currentRoleSubject=new i.t(r.SALES_EXECUTIVE),this.currentRole$=this.currentRoleSubject.asObservable(),console.log("[RbacService] Initialized"),this.initializeRole()}initializeRole(){const g=localStorage.getItem("user_role");g&&Object.values(r).includes(g)?this.currentRoleSubject.next(g):this.currentRoleSubject.next(r.ORG_ADMIN)}setRole(g){this.currentRoleSubject.next(g),localStorage.setItem("user_role",g)}getCurrentRole(){return this.currentRoleSubject.value}canManageRules(g=this.getCurrentRole()){return this.hasMinimumRole(g,r.TEAM_LEAD)}canViewRules(g=this.getCurrentRole()){return!0}hasMinimumRole(g,P){const _={[r.SUPER_ADMIN]:4,[r.ORG_ADMIN]:3,[r.TEAM_LEAD]:2,[r.SALES_EXECUTIVE]:1};return _[g]>=_[P]}getAllRoles(){return Object.values(r)}getRoleDisplayName(g){return{[r.SUPER_ADMIN]:"Super Admin",[r.ORG_ADMIN]:"Organization Admin",[r.TEAM_LEAD]:"Team Lead",[r.SALES_EXECUTIVE]:"Sales Executive"}[g]}static{this.\u0275fac=function(P){return new(P||e)}}static{this.\u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})()},9540:(D,f,t)=>{t.r(f),t.d(f,{RulesDataService:()=>E});var i=t(4412),n=t(7673),l=t(3103),r=t(4488),a=t(4332);let E=(()=>{class g{constructor(){this.rulesSubject=new i.t(this.getInitialDummyRules()),this.rules$=this.rulesSubject.asObservable(),console.log("[RulesDataService] Initialized with dummy data")}getRules(){return(0,n.of)(this.rulesSubject.value).pipe((0,l.c)(300))}getRuleById(_){const c=this.rulesSubject.value.find(v=>v.id===_);return(0,n.of)(c).pipe((0,l.c)(200))}createRule(_){const c={id:this.generateId(),..._,createdBy:"current-user",createdAt:new Date,updatedAt:new Date};return this.rulesSubject.next([...this.rulesSubject.value,c]),(0,n.of)(c).pipe((0,l.c)(300))}updateRule(_,c){const v=this.rulesSubject.value,S=v.findIndex(W=>W.id===_);if(-1===S)return(0,n.of)(void 0).pipe((0,l.c)(200));const C={...v[S],...c,updatedAt:new Date},x=[...v];return x[S]=C,this.rulesSubject.next(x),(0,n.of)(C).pipe((0,l.c)(300))}deleteRule(_){const c=this.rulesSubject.value,v=c.filter(S=>S.id!==_);return v.length===c.length?(0,n.of)(!1).pipe((0,l.c)(200)):(this.rulesSubject.next(v),(0,n.of)(!0).pipe((0,l.c)(300)))}generateId(){return`rule-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getInitialDummyRules(){const c=new Date((new Date).getTime()+31536e6);return[{id:"rule-001",name:"Basic Sales Commission",description:"Standard 5% commission on all sales",type:r.D.PERCENTAGE,status:r.l.ACTIVE,createdBy:"admin",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01"),percentageValue:5,applicableRoles:["sales-executive"],applicableBrands:["Brand A","Brand B"],validFrom:new Date("2024-01-01"),validTo:c,isShared:!0,canDelegate:!1},{id:"rule-002",name:"High Performer Bonus",description:"Fixed bonus for sales executives exceeding quarterly targets",type:r.D.FIXED,status:r.l.ACTIVE,createdBy:"team-lead",createdAt:new Date("2024-02-15"),updatedAt:new Date("2024-02-15"),fixedValue:1e4,applicableRoles:["sales-executive"],applicableBrands:["Brand A"],validFrom:new Date("2024-03-01"),validTo:new Date("2024-12-31"),isShared:!0,canDelegate:!0},{id:"rule-003",name:"Tiered Volume Incentive",description:"Progressive incentive based on sales volume tiers",type:r.D.TIERED,status:r.l.ACTIVE,createdBy:"admin",createdAt:new Date("2024-03-01"),updatedAt:new Date("2024-03-01"),tiers:[{id:"tier-1",minAmount:0,maxAmount:5e4,incentivePercentage:3},{id:"tier-2",minAmount:50001,maxAmount:1e5,incentivePercentage:5},{id:"tier-3",minAmount:100001,maxAmount:999999999,incentivePercentage:8}],applicableRoles:["sales-executive","team-lead"],applicableBrands:["Brand A","Brand B","Brand C"],validFrom:new Date("2024-04-01"),validTo:c,isShared:!0,canDelegate:!1},{id:"rule-004",name:"Team Achievement Bonus",description:"Shared bonus when team achieves collective target",type:r.D.TEAM_BASED,status:r.l.ACTIVE,createdBy:"admin",createdAt:new Date("2024-04-01"),updatedAt:new Date("2024-04-10"),fixedValue:5e4,applicableRoles:["sales-executive","team-lead"],applicableBrands:["Brand A","Brand B"],validFrom:new Date("2024-05-01"),validTo:new Date("2024-11-30"),isShared:!0,canDelegate:!0},{id:"rule-005",name:"New Product Launch Incentive",description:"Special incentive for promoting new product line",type:r.D.PERCENTAGE,status:r.l.DRAFT,createdBy:"team-lead",createdAt:new Date("2024-05-01"),updatedAt:new Date("2024-05-15"),percentageValue:10,applicableRoles:["sales-executive"],applicableBrands:["Brand C"],validFrom:new Date("2024-06-01"),validTo:new Date("2024-08-31"),isShared:!1,canDelegate:!1}]}static{this.\u0275fac=function(c){return new(c||g)}}static{this.\u0275prov=a.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()},4412:(D,f,t)=>{t.d(f,{t:()=>n});var i=t(1413);class n extends i.B{constructor(r){super(),this._value=r}get value(){return this.getValue()}_subscribe(r){const a=super._subscribe(r);return!a.closed&&r.next(this._value),a}getValue(){const{hasError:r,thrownError:a,_value:e}=this;if(r)throw a;return this._throwIfClosed(),e}next(r){super.next(this._value=r)}}},1985:(D,f,t)=>{t.d(f,{c:()=>g});var i=t(7707),n=t(8359),l=t(3494),r=t(1203),a=t(1026),e=t(8071),E=t(9786);let g=(()=>{class v{constructor(C){C&&(this._subscribe=C)}lift(C){const x=new v;return x.source=this,x.operator=C,x}subscribe(C,x,W){const L=function c(v){return v&&v instanceof i.vU||function _(v){return v&&(0,e.T)(v.next)&&(0,e.T)(v.error)&&(0,e.T)(v.complete)}(v)&&(0,n.Uv)(v)}(C)?C:new i.Ms(C,x,W);return(0,E.Y)(()=>{const{operator:K,source:N}=this;L.add(K?K.call(L,N):N?this._subscribe(L):this._trySubscribe(L))}),L}_trySubscribe(C){try{return this._subscribe(C)}catch(x){C.error(x)}}forEach(C,x){return new(x=P(x))((W,L)=>{const K=new i.Ms({next:N=>{try{C(N)}catch(z){L(z),K.unsubscribe()}},error:L,complete:W});this.subscribe(K)})}_subscribe(C){var x;return null===(x=this.source)||void 0===x?void 0:x.subscribe(C)}[l.s](){return this}pipe(...C){return(0,r.m)(C)(this)}toPromise(C){return new(C=P(C))((x,W)=>{let L;this.subscribe(K=>L=K,K=>W(K),()=>x(L))})}}return v.create=S=>new v(S),v})();function P(v){var S;return null!==(S=v??a.$.Promise)&&void 0!==S?S:Promise}},8399:(D,f,t)=>{t.d(f,{_:()=>n});var i=t(6129);class n{constructor(r,a=n.now){this.schedulerActionCtor=r,this.now=a}schedule(r,a=0,e){return new this.schedulerActionCtor(this,r).schedule(e,a)}}n.now=i.U.now},1413:(D,f,t)=>{t.d(f,{B:()=>E});var i=t(1985),n=t(8359);const r=(0,t(1853).L)(P=>function(){P(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var a=t(7908),e=t(9786);let E=(()=>{class P extends i.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(c){const v=new g(this,this);return v.operator=c,v}_throwIfClosed(){if(this.closed)throw new r}next(c){(0,e.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const v of this.currentObservers)v.next(c)}})}error(c){(0,e.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=c;const{observers:v}=this;for(;v.length;)v.shift().error(c)}})}complete(){(0,e.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:c}=this;for(;c.length;)c.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var c;return(null===(c=this.observers)||void 0===c?void 0:c.length)>0}_trySubscribe(c){return this._throwIfClosed(),super._trySubscribe(c)}_subscribe(c){return this._throwIfClosed(),this._checkFinalizedStatuses(c),this._innerSubscribe(c)}_innerSubscribe(c){const{hasError:v,isStopped:S,observers:C}=this;return v||S?n.Kn:(this.currentObservers=null,C.push(c),new n.yU(()=>{this.currentObservers=null,(0,a.o)(C,c)}))}_checkFinalizedStatuses(c){const{hasError:v,thrownError:S,isStopped:C}=this;v?c.error(S):C&&c.complete()}asObservable(){const c=new i.c;return c.source=this,c}}return P.create=(_,c)=>new g(_,c),P})();class g extends E{constructor(_,c){super(),this.destination=_,this.source=c}next(_){var c,v;null===(v=null===(c=this.destination)||void 0===c?void 0:c.next)||void 0===v||v.call(c,_)}error(_){var c,v;null===(v=null===(c=this.destination)||void 0===c?void 0:c.error)||void 0===v||v.call(c,_)}complete(){var _,c;null===(c=null===(_=this.destination)||void 0===_?void 0:_.complete)||void 0===c||c.call(_)}_subscribe(_){var c,v;return null!==(v=null===(c=this.source)||void 0===c?void 0:c.subscribe(_))&&void 0!==v?v:n.Kn}}},7707:(D,f,t)=>{t.d(f,{Ms:()=>W,vU:()=>v});var i=t(8071),n=t(8359),l=t(1026),r=t(5334),a=t(5343);const e=P("C",void 0,void 0);function P(b,O,T){return{kind:b,value:O,error:T}}var _=t(9270),c=t(9786);class v extends n.yU{constructor(O){super(),this.isStopped=!1,O?(this.destination=O,(0,n.Uv)(O)&&O.add(this)):this.destination=z}static create(O,T,U){return new W(O,T,U)}next(O){this.isStopped?N(function g(b){return P("N",b,void 0)}(O),this):this._next(O)}error(O){this.isStopped?N(function E(b){return P("E",void 0,b)}(O),this):(this.isStopped=!0,this._error(O))}complete(){this.isStopped?N(e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(O){this.destination.next(O)}_error(O){try{this.destination.error(O)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const S=Function.prototype.bind;function C(b,O){return S.call(b,O)}class x{constructor(O){this.partialObserver=O}next(O){const{partialObserver:T}=this;if(T.next)try{T.next(O)}catch(U){L(U)}}error(O){const{partialObserver:T}=this;if(T.error)try{T.error(O)}catch(U){L(U)}else L(O)}complete(){const{partialObserver:O}=this;if(O.complete)try{O.complete()}catch(T){L(T)}}}class W extends v{constructor(O,T,U){let p;if(super(),(0,i.T)(O)||!O)p={next:O??void 0,error:T??void 0,complete:U??void 0};else{let M;this&&l.$.useDeprecatedNextContext?(M=Object.create(O),M.unsubscribe=()=>this.unsubscribe(),p={next:O.next&&C(O.next,M),error:O.error&&C(O.error,M),complete:O.complete&&C(O.complete,M)}):p=O}this.destination=new x(p)}}function L(b){l.$.useDeprecatedSynchronousErrorHandling?(0,c.l)(b):(0,r.m)(b)}function N(b,O){const{onStoppedNotification:T}=l.$;T&&_.f.setTimeout(()=>T(b,O))}const z={closed:!0,next:a.l,error:function K(b){throw b},complete:a.l}},8359:(D,f,t)=>{t.d(f,{Kn:()=>e,yU:()=>a,Uv:()=>E});var i=t(8071);const l=(0,t(1853).L)(P=>function(c){P(this),this.message=c?`${c.length} errors occurred during unsubscription:\n${c.map((v,S)=>`${S+1}) ${v.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=c});var r=t(7908);class a{constructor(_){this.initialTeardown=_,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _;if(!this.closed){this.closed=!0;const{_parentage:c}=this;if(c)if(this._parentage=null,Array.isArray(c))for(const C of c)C.remove(this);else c.remove(this);const{initialTeardown:v}=this;if((0,i.T)(v))try{v()}catch(C){_=C instanceof l?C.errors:[C]}const{_finalizers:S}=this;if(S){this._finalizers=null;for(const C of S)try{g(C)}catch(x){_=_??[],x instanceof l?_=[..._,...x.errors]:_.push(x)}}if(_)throw new l(_)}}add(_){var c;if(_&&_!==this)if(this.closed)g(_);else{if(_ instanceof a){if(_.closed||_._hasParent(this))return;_._addParent(this)}(this._finalizers=null!==(c=this._finalizers)&&void 0!==c?c:[]).push(_)}}_hasParent(_){const{_parentage:c}=this;return c===_||Array.isArray(c)&&c.includes(_)}_addParent(_){const{_parentage:c}=this;this._parentage=Array.isArray(c)?(c.push(_),c):c?[c,_]:_}_removeParent(_){const{_parentage:c}=this;c===_?this._parentage=null:Array.isArray(c)&&(0,r.o)(c,_)}remove(_){const{_finalizers:c}=this;c&&(0,r.o)(c,_),_ instanceof a&&_._removeParent(this)}}a.EMPTY=(()=>{const P=new a;return P.closed=!0,P})();const e=a.EMPTY;function E(P){return P instanceof a||P&&"closed"in P&&(0,i.T)(P.remove)&&(0,i.T)(P.add)&&(0,i.T)(P.unsubscribe)}function g(P){(0,i.T)(P)?P():P.unsubscribe()}},1026:(D,f,t)=>{t.d(f,{$:()=>i});const i={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(D,f,t)=>{t.d(f,{x:()=>a});var i=t(6365),l=t(9326),r=t(6648);function a(...e){return function n(){return(0,i.U)(1)}()((0,r.H)(e,(0,l.lI)(e)))}},983:(D,f,t)=>{t.d(f,{w:()=>n});const n=new(t(1985).c)(a=>a.complete())},6648:(D,f,t)=>{t.d(f,{H:()=>U});var i=t(8750),n=t(5225),l=t(9974),r=t(4360);function a(p,M=0){return(0,l.N)((y,I)=>{y.subscribe((0,r._)(I,w=>(0,n.N)(I,p,()=>I.next(w),M),()=>(0,n.N)(I,p,()=>I.complete(),M),w=>(0,n.N)(I,p,()=>I.error(w),M)))})}function e(p,M=0){return(0,l.N)((y,I)=>{I.add(p.schedule(()=>y.subscribe(I),M))})}var P=t(1985),c=t(4761),v=t(8071);function C(p,M){if(!p)throw new Error("Iterable cannot be null");return new P.c(y=>{(0,n.N)(y,M,()=>{const I=p[Symbol.asyncIterator]();(0,n.N)(y,M,()=>{I.next().then(w=>{w.done?y.complete():y.next(w.value)})},0,!0)})})}var x=t(5055),W=t(9858),L=t(7441),K=t(5397),N=t(7953),z=t(591),b=t(5196);function U(p,M){return M?function T(p,M){if(null!=p){if((0,x.l)(p))return function E(p,M){return(0,i.Tg)(p).pipe(e(M),a(M))}(p,M);if((0,L.X)(p))return function _(p,M){return new P.c(y=>{let I=0;return M.schedule(function(){I===p.length?y.complete():(y.next(p[I++]),y.closed||this.schedule())})})}(p,M);if((0,W.y)(p))return function g(p,M){return(0,i.Tg)(p).pipe(e(M),a(M))}(p,M);if((0,N.T)(p))return C(p,M);if((0,K.x)(p))return function S(p,M){return new P.c(y=>{let I;return(0,n.N)(y,M,()=>{I=p[c.l](),(0,n.N)(y,M,()=>{let w,G;try{({value:w,done:G}=I.next())}catch(Z){return void y.error(Z)}G?y.complete():y.next(w)},0,!0)}),()=>(0,v.T)(I?.return)&&I.return()})}(p,M);if((0,b.U)(p))return function O(p,M){return C((0,b.C)(p),M)}(p,M)}throw(0,z.L)(p)}(p,M):(0,i.Tg)(p)}},8750:(D,f,t)=>{t.d(f,{Tg:()=>S});var i=t(1635),n=t(7441),l=t(9858),r=t(1985),a=t(5055),e=t(7953),E=t(591),g=t(5397),P=t(5196),_=t(8071),c=t(5334),v=t(3494);function S(b){if(b instanceof r.c)return b;if(null!=b){if((0,a.l)(b))return function C(b){return new r.c(O=>{const T=b[v.s]();if((0,_.T)(T.subscribe))return T.subscribe(O);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(b);if((0,n.X)(b))return function x(b){return new r.c(O=>{for(let T=0;T<b.length&&!O.closed;T++)O.next(b[T]);O.complete()})}(b);if((0,l.y)(b))return function W(b){return new r.c(O=>{b.then(T=>{O.closed||(O.next(T),O.complete())},T=>O.error(T)).then(null,c.m)})}(b);if((0,e.T)(b))return K(b);if((0,g.x)(b))return function L(b){return new r.c(O=>{for(const T of b)if(O.next(T),O.closed)return;O.complete()})}(b);if((0,P.U)(b))return function N(b){return K((0,P.C)(b))}(b)}throw(0,E.L)(b)}function K(b){return new r.c(O=>{(function z(b,O){var T,U,p,M;return(0,i.sH)(this,void 0,void 0,function*(){try{for(T=(0,i.xN)(b);!(U=yield T.next()).done;)if(O.next(U.value),O.closed)return}catch(y){p={error:y}}finally{try{U&&!U.done&&(M=T.return)&&(yield M.call(T))}finally{if(p)throw p.error}}O.complete()})})(b,O).catch(T=>O.error(T))})}},7673:(D,f,t)=>{t.d(f,{of:()=>l});var i=t(9326),n=t(6648);function l(...r){const a=(0,i.lI)(r);return(0,n.H)(r,a)}},1807:(D,f,t)=>{t.d(f,{O:()=>a});var i=t(1985),n=t(3236),l=t(9470),r=t(8211);function a(e=0,E,g=n.b){let P=-1;return null!=E&&((0,l.m)(E)?g=E:P=E),new i.c(_=>{let c=(0,r.v)(e)?+e-g.now():e;c<0&&(c=0);let v=0;return g.schedule(function(){_.closed||(_.next(v++),0<=P?this.schedule(void 0,P):_.complete())},c)})}},4360:(D,f,t)=>{t.d(f,{_:()=>n});var i=t(7707);function n(r,a,e,E,g){return new l(r,a,e,E,g)}class l extends i.vU{constructor(a,e,E,g,P,_){super(a),this.onFinalize=P,this.shouldUnsubscribe=_,this._next=e?function(c){try{e(c)}catch(v){a.error(v)}}:super._next,this._error=g?function(c){try{g(c)}catch(v){a.error(v)}finally{this.unsubscribe()}}:super._error,this._complete=E?function(){try{E()}catch(c){a.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(a=this.onFinalize)||void 0===a||a.call(this))}}}},3103:(D,f,t)=>{t.d(f,{c:()=>r});var i=t(3236),n=t(3183),l=t(1807);function r(a,e=i.E){const E=(0,l.O)(a,e);return(0,n.o)(()=>E)}},3183:(D,f,t)=>{t.d(f,{o:()=>E});var i=t(8793),n=t(6697),l=t(3557),r=t(3703),a=t(1397),e=t(8750);function E(g,P){return P?_=>(0,i.x)(P.pipe((0,n.s)(1),(0,l.w)()),_.pipe(E(g))):(0,a.Z)((_,c)=>(0,e.Tg)(g(_,c)).pipe((0,n.s)(1),(0,r.u)(_)))}},3557:(D,f,t)=>{t.d(f,{w:()=>r});var i=t(9974),n=t(4360),l=t(5343);function r(){return(0,i.N)((a,e)=>{a.subscribe((0,n._)(e,l.l))})}},6354:(D,f,t)=>{t.d(f,{T:()=>l});var i=t(9974),n=t(4360);function l(r,a){return(0,i.N)((e,E)=>{let g=0;e.subscribe((0,n._)(E,P=>{E.next(r.call(a,P,g++))}))})}},3703:(D,f,t)=>{t.d(f,{u:()=>n});var i=t(6354);function n(l){return(0,i.T)(()=>l)}},6365:(D,f,t)=>{t.d(f,{U:()=>l});var i=t(1397),n=t(3669);function l(r=1/0){return(0,i.Z)(n.D,r)}},1397:(D,f,t)=>{t.d(f,{Z:()=>g});var i=t(6354),n=t(8750),l=t(9974),r=t(5225),a=t(4360),E=t(8071);function g(P,_,c=1/0){return(0,E.T)(_)?g((v,S)=>(0,i.T)((C,x)=>_(v,C,S,x))((0,n.Tg)(P(v,S))),c):("number"==typeof _&&(c=_),(0,l.N)((v,S)=>function e(P,_,c,v,S,C,x,W){const L=[];let K=0,N=0,z=!1;const b=()=>{z&&!L.length&&!K&&_.complete()},O=U=>K<v?T(U):L.push(U),T=U=>{C&&_.next(U),K++;let p=!1;(0,n.Tg)(c(U,N++)).subscribe((0,a._)(_,M=>{S?.(M),C?O(M):_.next(M)},()=>{p=!0},void 0,()=>{if(p)try{for(K--;L.length&&K<v;){const M=L.shift();x?(0,r.N)(_,x,()=>T(M)):T(M)}b()}catch(M){_.error(M)}}))};return P.subscribe((0,a._)(_,O,()=>{z=!0,b()})),()=>{W?.()}}(v,S,P,c)))}},6697:(D,f,t)=>{t.d(f,{s:()=>r});var i=t(983),n=t(9974),l=t(4360);function r(a){return a<=0?()=>i.w:(0,n.N)((e,E)=>{let g=0;e.subscribe((0,l._)(E,P=>{++g<=a&&(E.next(P),a<=g&&E.complete())}))})}},3260:(D,f,t)=>{t.d(f,{r:()=>n});var i=t(8359);class n extends i.yU{constructor(r,a){super()}schedule(r,a=0){return this}}},7302:(D,f,t)=>{t.d(f,{R:()=>r});var i=t(3260),n=t(8198),l=t(7908);class r extends i.r{constructor(e,E){super(e,E),this.scheduler=e,this.work=E,this.pending=!1}schedule(e,E=0){var g;if(this.closed)return this;this.state=e;const P=this.id,_=this.scheduler;return null!=P&&(this.id=this.recycleAsyncId(_,P,E)),this.pending=!0,this.delay=E,this.id=null!==(g=this.id)&&void 0!==g?g:this.requestAsyncId(_,this.id,E),this}requestAsyncId(e,E,g=0){return n.f.setInterval(e.flush.bind(e,this),g)}recycleAsyncId(e,E,g=0){if(null!=g&&this.delay===g&&!1===this.pending)return E;null!=E&&n.f.clearInterval(E)}execute(e,E){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const g=this._execute(e,E);if(g)return g;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,E){let P,g=!1;try{this.work(e)}catch(_){g=!0,P=_||new Error("Scheduled action threw falsy error")}if(g)return this.unsubscribe(),P}unsubscribe(){if(!this.closed){const{id:e,scheduler:E}=this,{actions:g}=E;this.work=this.state=this.scheduler=null,this.pending=!1,(0,l.o)(g,this),null!=e&&(this.id=this.recycleAsyncId(E,e,null)),this.delay=null,super.unsubscribe()}}}},707:(D,f,t)=>{t.d(f,{q:()=>n});var i=t(8399);class n extends i._{constructor(r,a=i._.now){super(r,a),this.actions=[],this._active=!1}flush(r){const{actions:a}=this;if(this._active)return void a.push(r);let e;this._active=!0;do{if(e=r.execute(r.state,r.delay))break}while(r=a.shift());if(this._active=!1,e){for(;r=a.shift();)r.unsubscribe();throw e}}}},3236:(D,f,t)=>{t.d(f,{E:()=>l,b:()=>r});var i=t(7302);const l=new(t(707).q)(i.R),r=l},6129:(D,f,t)=>{t.d(f,{U:()=>i});const i={now:()=>(i.delegate||Date).now(),delegate:void 0}},8198:(D,f,t)=>{t.d(f,{f:()=>i});const i={setInterval(n,l,...r){const{delegate:a}=i;return a?.setInterval?a.setInterval(n,l,...r):setInterval(n,l,...r)},clearInterval(n){const{delegate:l}=i;return(l?.clearInterval||clearInterval)(n)},delegate:void 0}},9270:(D,f,t)=>{t.d(f,{f:()=>i});const i={setTimeout(n,l,...r){const{delegate:a}=i;return a?.setTimeout?a.setTimeout(n,l,...r):setTimeout(n,l,...r)},clearTimeout(n){const{delegate:l}=i;return(l?.clearTimeout||clearTimeout)(n)},delegate:void 0}},4761:(D,f,t)=>{t.d(f,{l:()=>n});const n=function i(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(D,f,t)=>{t.d(f,{s:()=>i});const i="function"==typeof Symbol&&Symbol.observable||"@@observable"},9326:(D,f,t)=>{t.d(f,{lI:()=>a,ms:()=>r});var i=t(8071),n=t(9470);function l(E){return E[E.length-1]}function r(E){return(0,i.T)(l(E))?E.pop():void 0}function a(E){return(0,n.m)(l(E))?E.pop():void 0}},7908:(D,f,t)=>{function i(n,l){if(n){const r=n.indexOf(l);0<=r&&n.splice(r,1)}}t.d(f,{o:()=>i})},1853:(D,f,t)=>{function i(n){const r=n(a=>{Error.call(a),a.stack=(new Error).stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}t.d(f,{L:()=>i})},9786:(D,f,t)=>{t.d(f,{Y:()=>l,l:()=>r});var i=t(1026);let n=null;function l(a){if(i.$.useDeprecatedSynchronousErrorHandling){const e=!n;if(e&&(n={errorThrown:!1,error:null}),a(),e){const{errorThrown:E,error:g}=n;if(n=null,E)throw g}}else a()}function r(a){i.$.useDeprecatedSynchronousErrorHandling&&n&&(n.errorThrown=!0,n.error=a)}},5225:(D,f,t)=>{function i(n,l,r,a=0,e=!1){const E=l.schedule(function(){r(),e?n.add(this.schedule(null,a)):this.unsubscribe()},a);if(n.add(E),!e)return E}t.d(f,{N:()=>i})},3669:(D,f,t)=>{function i(n){return n}t.d(f,{D:()=>i})},7441:(D,f,t)=>{t.d(f,{X:()=>i});const i=n=>n&&"number"==typeof n.length&&"function"!=typeof n},7953:(D,f,t)=>{t.d(f,{T:()=>n});var i=t(8071);function n(l){return Symbol.asyncIterator&&(0,i.T)(l?.[Symbol.asyncIterator])}},8211:(D,f,t)=>{function i(n){return n instanceof Date&&!isNaN(n)}t.d(f,{v:()=>i})},8071:(D,f,t)=>{function i(n){return"function"==typeof n}t.d(f,{T:()=>i})},5055:(D,f,t)=>{t.d(f,{l:()=>l});var i=t(3494),n=t(8071);function l(r){return(0,n.T)(r[i.s])}},5397:(D,f,t)=>{t.d(f,{x:()=>l});var i=t(4761),n=t(8071);function l(r){return(0,n.T)(r?.[i.l])}},9858:(D,f,t)=>{t.d(f,{y:()=>n});var i=t(8071);function n(l){return(0,i.T)(l?.then)}},5196:(D,f,t)=>{t.d(f,{C:()=>l,U:()=>r});var i=t(1635),n=t(8071);function l(a){return(0,i.AQ)(this,arguments,function*(){const E=a.getReader();try{for(;;){const{value:g,done:P}=yield(0,i.N3)(E.read());if(P)return yield(0,i.N3)(void 0);yield yield(0,i.N3)(g)}}finally{E.releaseLock()}})}function r(a){return(0,n.T)(a?.getReader)}},9470:(D,f,t)=>{t.d(f,{m:()=>n});var i=t(8071);function n(l){return l&&(0,i.T)(l.schedule)}},9974:(D,f,t)=>{t.d(f,{N:()=>l,S:()=>n});var i=t(8071);function n(r){return(0,i.T)(r?.lift)}function l(r){return a=>{if(n(a))return a.lift(function(e){try{return r(e,this)}catch(E){this.error(E)}});throw new TypeError("Unable to lift unknown Observable type")}}},5343:(D,f,t)=>{function i(){}t.d(f,{l:()=>i})},1203:(D,f,t)=>{t.d(f,{F:()=>n,m:()=>l});var i=t(3669);function n(...r){return l(r)}function l(r){return 0===r.length?i.D:1===r.length?r[0]:function(e){return r.reduce((E,g)=>g(E),e)}}},5334:(D,f,t)=>{t.d(f,{m:()=>l});var i=t(1026),n=t(9270);function l(r){n.f.setTimeout(()=>{const{onUnhandledError:a}=i.$;if(!a)throw r;a(r)})}},591:(D,f,t)=>{function i(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}t.d(f,{L:()=>i})},1635:(D,f,t)=>{function v(o,s,u,d){return new(u||(u=Promise))(function(h,R){function B(F){try{A(d.next(F))}catch(V){R(V)}}function $(F){try{A(d.throw(F))}catch(V){R(V)}}function A(F){F.done?h(F.value):function m(h){return h instanceof u?h:new u(function(R){R(h)})}(F.value).then(B,$)}A((d=d.apply(o,s||[])).next())})}function b(o){return this instanceof b?(this.v=o,this):new b(o)}function O(o,s,u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m,d=u.apply(o,s||[]),h=[];return m=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),B("next"),B("throw"),B("return",function R(j){return function(H){return Promise.resolve(H).then(j,V)}}),m[Symbol.asyncIterator]=function(){return this},m;function B(j,H){d[j]&&(m[j]=function(Y){return new Promise(function(X,Q){h.push([j,Y,X,Q])>1||$(j,Y)})},H&&(m[j]=H(m[j])))}function $(j,H){try{!function A(j){j.value instanceof b?Promise.resolve(j.value.v).then(F,V):J(h[0][2],j)}(d[j](H))}catch(Y){J(h[0][3],Y)}}function F(j){$("next",j)}function V(j){$("throw",j)}function J(j,H){j(H),h.shift(),h.length&&$(h[0][0],h[0][1])}}function U(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,s=o[Symbol.asyncIterator];return s?s.call(o):(o=function W(o){var s="function"==typeof Symbol&&Symbol.iterator,u=s&&o[s],d=0;if(u)return u.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&d>=o.length&&(o=void 0),{value:o&&o[d++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),u={},d("next"),d("throw"),d("return"),u[Symbol.asyncIterator]=function(){return this},u);function d(h){u[h]=o[h]&&function(R){return new Promise(function(B,$){!function m(h,R,B,$){Promise.resolve($).then(function(A){h({value:A,done:B})},R)}(B,$,(R=o[h](R)).done,R.value)})}}}t.d(f,{AQ:()=>O,N3:()=>b,sH:()=>v,xN:()=>U}),"function"==typeof SuppressedError&&SuppressedError}}]);