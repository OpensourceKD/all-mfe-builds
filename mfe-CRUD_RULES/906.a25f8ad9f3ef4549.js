(self.webpackChunkmfe_CRUD_RULES=self.webpackChunkmfe_CRUD_RULES||[]).push([[906],{6906:(v,a,t)=>{t.r(a),t.d(a,{RbacService:()=>c,UserRole:()=>s});var o=t(4412),u=t(4332),s=function(f){return f.SUPER_ADMIN="super-admin",f.ORG_ADMIN="org-admin",f.TEAM_LEAD="team-lead",f.SALES_EXECUTIVE="sales-executive",f}(s||{});let c=(()=>{class f{constructor(){this.currentRoleSubject=new o.t(s.SALES_EXECUTIVE),this.currentRole$=this.currentRoleSubject.asObservable(),console.log("[RbacService] Initialized"),this.initializeRole()}initializeRole(){const b=localStorage.getItem("user_role");b&&Object.values(s).includes(b)?this.currentRoleSubject.next(b):this.currentRoleSubject.next(s.ORG_ADMIN)}setRole(b){this.currentRoleSubject.next(b),localStorage.setItem("user_role",b)}getCurrentRole(){return this.currentRoleSubject.value}canManageRules(b=this.getCurrentRole()){return this.hasMinimumRole(b,s.TEAM_LEAD)}canViewRules(b=this.getCurrentRole()){return!0}hasMinimumRole(b,d){const r={[s.SUPER_ADMIN]:4,[s.ORG_ADMIN]:3,[s.TEAM_LEAD]:2,[s.SALES_EXECUTIVE]:1};return r[b]>=r[d]}getAllRoles(){return Object.values(s)}getRoleDisplayName(b){return{[s.SUPER_ADMIN]:"Super Admin",[s.ORG_ADMIN]:"Organization Admin",[s.TEAM_LEAD]:"Team Lead",[s.SALES_EXECUTIVE]:"Sales Executive"}[b]}static{this.\u0275fac=function(d){return new(d||f)}}static{this.\u0275prov=u.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()},4412:(v,a,t)=>{t.d(a,{t:()=>u});var o=t(1413);class u extends o.B{constructor(s){super(),this._value=s}get value(){return this.getValue()}_subscribe(s){const c=super._subscribe(s);return!c.closed&&s.next(this._value),c}getValue(){const{hasError:s,thrownError:c,_value:f}=this;if(s)throw c;return this._throwIfClosed(),f}next(s){super.next(this._value=s)}}},1985:(v,a,t)=>{t.d(a,{c:()=>b});var o=t(7707),u=t(8359),h=t(3494),s=t(1203),c=t(1026),f=t(8071),T=t(9786);let b=(()=>{class n{constructor(l){l&&(this._subscribe=l)}lift(l){const _=new n;return _.source=this,_.operator=l,_}subscribe(l,_,D){const S=function e(n){return n&&n instanceof o.vU||function r(n){return n&&(0,f.T)(n.next)&&(0,f.T)(n.error)&&(0,f.T)(n.complete)}(n)&&(0,u.Uv)(n)}(l)?l:new o.Ms(l,_,D);return(0,T.Y)(()=>{const{operator:P,source:M}=this;S.add(P?P.call(S,M):M?this._subscribe(S):this._trySubscribe(S))}),S}_trySubscribe(l){try{return this._subscribe(l)}catch(_){l.error(_)}}forEach(l,_){return new(_=d(_))((D,S)=>{const P=new o.Ms({next:M=>{try{l(M)}catch(A){S(A),P.unsubscribe()}},error:S,complete:D});this.subscribe(P)})}_subscribe(l){var _;return null===(_=this.source)||void 0===_?void 0:_.subscribe(l)}[h.s](){return this}pipe(...l){return(0,s.m)(l)(this)}toPromise(l){return new(l=d(l))((_,D)=>{let S;this.subscribe(P=>S=P,P=>D(P),()=>_(S))})}}return n.create=m=>new n(m),n})();function d(n){var m;return null!==(m=n??c.$.Promise)&&void 0!==m?m:Promise}},1413:(v,a,t)=>{t.d(a,{B:()=>T});var o=t(1985),u=t(8359);const s=(0,t(1853).L)(d=>function(){d(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var c=t(7908),f=t(9786);let T=(()=>{class d extends o.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new b(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new s}next(e){(0,f.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){(0,f.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){(0,f.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:m,observers:l}=this;return n||m?u.Kn:(this.currentObservers=null,l.push(e),new u.yU(()=>{this.currentObservers=null,(0,c.o)(l,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:m,isStopped:l}=this;n?e.error(m):l&&e.complete()}asObservable(){const e=new o.c;return e.source=this,e}}return d.create=(r,e)=>new b(r,e),d})();class b extends T{constructor(r,e){super(),this.destination=r,this.source=e}next(r){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,r)}error(r){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,r)}complete(){var r,e;null===(e=null===(r=this.destination)||void 0===r?void 0:r.complete)||void 0===e||e.call(r)}_subscribe(r){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(r))&&void 0!==n?n:u.Kn}}},7707:(v,a,t)=>{t.d(a,{Ms:()=>D,vU:()=>n});var o=t(8071),u=t(8359),h=t(1026),s=t(5334),c=t(5343);const f=d("C",void 0,void 0);function d(p,i,E){return{kind:p,value:i,error:E}}var r=t(9270),e=t(9786);class n extends u.yU{constructor(i){super(),this.isStopped=!1,i?(this.destination=i,(0,u.Uv)(i)&&i.add(this)):this.destination=A}static create(i,E,R){return new D(i,E,R)}next(i){this.isStopped?M(function b(p){return d("N",p,void 0)}(i),this):this._next(i)}error(i){this.isStopped?M(function T(p){return d("E",void 0,p)}(i),this):(this.isStopped=!0,this._error(i))}complete(){this.isStopped?M(f,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(i){this.destination.next(i)}_error(i){try{this.destination.error(i)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const m=Function.prototype.bind;function l(p,i){return m.call(p,i)}class _{constructor(i){this.partialObserver=i}next(i){const{partialObserver:E}=this;if(E.next)try{E.next(i)}catch(R){S(R)}}error(i){const{partialObserver:E}=this;if(E.error)try{E.error(i)}catch(R){S(R)}else S(i)}complete(){const{partialObserver:i}=this;if(i.complete)try{i.complete()}catch(E){S(E)}}}class D extends n{constructor(i,E,R){let y;if(super(),(0,o.T)(i)||!i)y={next:i??void 0,error:E??void 0,complete:R??void 0};else{let O;this&&h.$.useDeprecatedNextContext?(O=Object.create(i),O.unsubscribe=()=>this.unsubscribe(),y={next:i.next&&l(i.next,O),error:i.error&&l(i.error,O),complete:i.complete&&l(i.complete,O)}):y=i}this.destination=new _(y)}}function S(p){h.$.useDeprecatedSynchronousErrorHandling?(0,e.l)(p):(0,s.m)(p)}function M(p,i){const{onStoppedNotification:E}=h.$;E&&r.f.setTimeout(()=>E(p,i))}const A={closed:!0,next:c.l,error:function P(p){throw p},complete:c.l}},8359:(v,a,t)=>{t.d(a,{Kn:()=>f,yU:()=>c,Uv:()=>T});var o=t(8071);const h=(0,t(1853).L)(d=>function(e){d(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,m)=>`${m+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});var s=t(7908);class c{constructor(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let r;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const l of e)l.remove(this);else e.remove(this);const{initialTeardown:n}=this;if((0,o.T)(n))try{n()}catch(l){r=l instanceof h?l.errors:[l]}const{_finalizers:m}=this;if(m){this._finalizers=null;for(const l of m)try{b(l)}catch(_){r=r??[],_ instanceof h?r=[...r,..._.errors]:r.push(_)}}if(r)throw new h(r)}}add(r){var e;if(r&&r!==this)if(this.closed)b(r);else{if(r instanceof c){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(r)}}_hasParent(r){const{_parentage:e}=this;return e===r||Array.isArray(e)&&e.includes(r)}_addParent(r){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(r),e):e?[e,r]:r}_removeParent(r){const{_parentage:e}=this;e===r?this._parentage=null:Array.isArray(e)&&(0,s.o)(e,r)}remove(r){const{_finalizers:e}=this;e&&(0,s.o)(e,r),r instanceof c&&r._removeParent(this)}}c.EMPTY=(()=>{const d=new c;return d.closed=!0,d})();const f=c.EMPTY;function T(d){return d instanceof c||d&&"closed"in d&&(0,o.T)(d.remove)&&(0,o.T)(d.add)&&(0,o.T)(d.unsubscribe)}function b(d){(0,o.T)(d)?d():d.unsubscribe()}},1026:(v,a,t)=>{t.d(a,{$:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9270:(v,a,t)=>{t.d(a,{f:()=>o});const o={setTimeout(u,h,...s){const{delegate:c}=o;return c?.setTimeout?c.setTimeout(u,h,...s):setTimeout(u,h,...s)},clearTimeout(u){const{delegate:h}=o;return(h?.clearTimeout||clearTimeout)(u)},delegate:void 0}},3494:(v,a,t)=>{t.d(a,{s:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},7908:(v,a,t)=>{function o(u,h){if(u){const s=u.indexOf(h);0<=s&&u.splice(s,1)}}t.d(a,{o:()=>o})},1853:(v,a,t)=>{function o(u){const s=u(c=>{Error.call(c),c.stack=(new Error).stack});return s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,s}t.d(a,{L:()=>o})},9786:(v,a,t)=>{t.d(a,{Y:()=>h,l:()=>s});var o=t(1026);let u=null;function h(c){if(o.$.useDeprecatedSynchronousErrorHandling){const f=!u;if(f&&(u={errorThrown:!1,error:null}),c(),f){const{errorThrown:T,error:b}=u;if(u=null,T)throw b}}else c()}function s(c){o.$.useDeprecatedSynchronousErrorHandling&&u&&(u.errorThrown=!0,u.error=c)}},3669:(v,a,t)=>{function o(u){return u}t.d(a,{D:()=>o})},8071:(v,a,t)=>{function o(u){return"function"==typeof u}t.d(a,{T:()=>o})},5343:(v,a,t)=>{function o(){}t.d(a,{l:()=>o})},1203:(v,a,t)=>{t.d(a,{F:()=>u,m:()=>h});var o=t(3669);function u(...s){return h(s)}function h(s){return 0===s.length?o.D:1===s.length?s[0]:function(f){return s.reduce((T,b)=>b(T),f)}}},5334:(v,a,t)=>{t.d(a,{m:()=>h});var o=t(1026),u=t(9270);function h(s){u.f.setTimeout(()=>{const{onUnhandledError:c}=o.$;if(!c)throw s;c(s)})}}}]);