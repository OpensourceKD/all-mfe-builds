(self.webpackChunkshell=self.webpackChunkshell||[]).push([[191],{191:(O,y,a)=>{a.r(y),a.d(y,{bootstrap:()=>$});var x=a(1194),h=a(3319),u=a(5315),f=a(467),t=a(5565),w=a(7412),S=a(1913);const I=["container"];let F=(()=>{class o{constructor(){this.name=""}ngAfterViewInit(){var n=this;return(0,f.A)(function*(){const e=w.A.map(({remoteName:s,exposedModule:g})=>({remoteName:s,exposedModule:g})).find(({remoteName:s})=>s===n.name);if(!e)return;const r=yield(0,S.loadRemoteModule)(e);n.remoteContainer.createComponent(r.AppComponent)})()}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-mfe-wrapper"]],viewQuery:function(e,r){if(1&e&&t.\u0275\u0275viewQuery(I,7,t.ViewContainerRef),2&e){let s;t.\u0275\u0275queryRefresh(s=t.\u0275\u0275loadQuery())&&(r.remoteContainer=s.first)}},inputs:{name:"name"},standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:4,vars:0,consts:[["container",""]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"mfe-wrapper works!"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainer(2,null,0))},changeDetection:0})}}return o})();var l=a(1663);let b=(()=>{class o{constructor(n){this.http=n}login(){window.location.href="http://localhost:4000/auth/login"}logout(){window.location.href="http://localhost:4000/auth/logout"}getUserProfile(){return this.http.get("http://localhost:4000/auth/me",{withCredentials:!0})}static{this.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275inject(l.HttpClient))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var j=a(8662);function T(o,m){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div")(1,"p"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"button",6),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.logout())}),t.\u0275\u0275text(4,"Logout"),t.\u0275\u0275elementEnd()()}if(2&o){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("Welcome, ",n.user.name||n.user.email,"")}}function E(o,m){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",6),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const r=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(r.login())}),t.\u0275\u0275text(1,"Login"),t.\u0275\u0275elementEnd()}}let k=(()=>{class o{constructor(n,e){this.auth=n,this.k=e,this.title="shell-module",this.user=null,this.mfe1="pokemon"}ngOnInit(){this.fetchUser()}login(){this.auth.login()}logout(){this.auth.logout()}fetchUser(){this.auth.getUserProfile().subscribe(n=>this.user=n)}static{this.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(b),t.\u0275\u0275directiveInject(j.AuthService))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-root"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:11,vars:3,consts:[["loginTemplate",""],["routerLink","/funny"],["routerLink","/lazy"],[4,"ngIf","ngIfElse"],["id","main"],[3,"name"],[3,"click"]],template:function(e,r){if(1&e&&(t.\u0275\u0275elementStart(0,"div")(1,"a",1),t.\u0275\u0275text(2,"Funny"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"a",2),t.\u0275\u0275text(4,"Lazy Load"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(5,T,5,1,"div",3)(6,E,2,0,"ng-template",null,0,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementStart(8,"section",4),t.\u0275\u0275element(9,"router-outlet"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(10,"app-mfe-wrapper",5)),2&e){const s=t.\u0275\u0275reference(7);t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",r.user)("ngIfElse",s),t.\u0275\u0275advance(5),t.\u0275\u0275property("name",r.mfe1)}},dependencies:[h.RouterOutlet,u.CommonModule,u.NgIf,h.RouterLink,F]})}}return o})();var A=a(8049),i=a(4866);let L=(()=>{class o{constructor(n){this.$http=n,this.$masterSet=new i.BehaviorSubject([]),this.$loadMoreEvent=new i.BehaviorSubject(""),this.url="https://pokeapi.co/api/v2/pokemon/?offset=0&limit=20",this.$http.get(this.url).pipe((0,i.tap)(({next:e})=>{this.next=e}),(0,i.map)(({results:e})=>e)).subscribe(e=>this.$masterSet.next(e)),this.$loadMoreEvent.pipe((0,i.debounceTime)(500)).subscribe(e=>{"loadMore"===e&&this.loadMore()})}loadMore(){this.next&&this.$http.get(this.next).pipe((0,i.tap)(({next:n})=>{this.next=n}),(0,i.map)(({results:n})=>n)).subscribe(n=>{this.$masterSet.next([...this.$masterSet.value,...n])})}static{this.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275inject(l.HttpClient))}}static{this.\u0275prov=t.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function z(o,m){if(1&o&&(t.\u0275\u0275elementStart(0,"li"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const n=m.$implicit;t.\u0275\u0275advance(),t.\u0275\u0275textInterpolate(n.name)}}const M=[{path:"lazy",component:(()=>{class o{constructor(n,e){this.pokemonService=n,this.destroyRef=e,(0,i.fromEvent)(window,"scroll").pipe((0,A.takeUntilDestroyed)(this.destroyRef),(0,i.map)(()=>window.scrollY+window.innerHeight>=document.body.scrollHeight),(0,i.distinctUntilChanged)(),(0,i.filter)(r=>!0===r)).subscribe(()=>{this.pokemonService.$loadMoreEvent.next("loadMore")}),console.log("LazyloadComponent constructed")}referId(n,e){return e.name}ngOnInit(){console.log("LazyloadComponent initialized")}ngOnDestroy(){console.log("LazyloadComponent destroyed")}static{this.\u0275fac=function(e){return new(e||o)(t.\u0275\u0275directiveInject(L),t.\u0275\u0275directiveInject(t.DestroyRef))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-lazyload"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:5,vars:4,consts:[[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"lazyload works!"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"ul"),t.\u0275\u0275template(3,z,2,1,"li",0),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(4,2,r.pokemonService.$masterSet))("ngForTrackBy",r.referId))},dependencies:[u.CommonModule,u.NgForOf,u.AsyncPipe]})}}return o})()},{path:"",component:(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-funny"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:2,vars:0,template:function(e,r){1&e&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"funny works!"),t.\u0275\u0275elementEnd())}})}}return o})()}],R=(o,m)=>new i.Observable(n=>{let e;return(0,f.A)(function*(){const{urlWithParams:s}=o,C=yield caches.open("http"),d=yield C.match(s);if(d){let c;console.log("Serve from Cache for",s);try{c=yield d.clone().json()}catch{c=yield d.clone().text()}return n.next(new l.HttpResponse({body:c,status:d.status||200,url:o.urlWithParams})),void n.complete()}var c;e=m(o).subscribe({next:(c=(0,f.A)(function*(p){if(console.log("Cache miss for ",s),n.next(p),p instanceof l.HttpResponse&&p.ok){const v=new Response(JSON.stringify(p.body),{headers:{"Content-Type":"application/json"},status:p.status,statusText:p.statusText});yield C.put(o.urlWithParams,v)}}),function(v){return c.apply(this,arguments)}),error:c=>n.error(c),complete:()=>n.complete()})})(),()=>e?.unsubscribe()});function $(){return(0,x.bootstrapApplication)(k,{providers:[(0,h.provideRouter)(M),(0,l.provideHttpClient)((0,l.withFetch)(),(0,l.withInterceptors)([R]))]})}}}]);